var Dn=Object.defineProperty;var Un=(e,t,n)=>t in e?Dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var se=(e,t,n)=>Un(e,typeof t!="symbol"?t+"":t,n);import{i as Rn}from"./editor.worker.js";/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/function ft(e,t=!1){const n=e.length;let r=0,i="",s=0,o=16,f=0,a=0,c=0,u=0,l=0;function h(m,S){let b=0,T=0;for(;b<m;){let O=e.charCodeAt(r);if(O>=48&&O<=57)T=T*16+O-48;else if(O>=65&&O<=70)T=T*16+O-65+10;else if(O>=97&&O<=102)T=T*16+O-97+10;else break;r++,b++}return b<m&&(T=-1),T}function p(m){r=m,i="",s=0,o=16,l=0}function g(){let m=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&pe(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&pe(e.charCodeAt(r)))for(r++;r<e.length&&pe(e.charCodeAt(r));)r++;else return l=3,e.substring(m,r);let S=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&pe(e.charCodeAt(r))){for(r++;r<e.length&&pe(e.charCodeAt(r));)r++;S=r}else l=3;return e.substring(m,S)}function d(){let m="",S=r;for(;;){if(r>=n){m+=e.substring(S,r),l=2;break}const b=e.charCodeAt(r);if(b===34){m+=e.substring(S,r),r++;break}if(b===92){if(m+=e.substring(S,r),r++,r>=n){l=2;break}switch(e.charCodeAt(r++)){case 34:m+='"';break;case 92:m+="\\";break;case 47:m+="/";break;case 98:m+="\b";break;case 102:m+="\f";break;case 110:m+=`
`;break;case 114:m+="\r";break;case 116:m+="	";break;case 117:const O=h(4);O>=0?m+=String.fromCharCode(O):l=4;break;default:l=5}S=r;continue}if(b>=0&&b<=31)if(Ae(b)){m+=e.substring(S,r),l=2;break}else l=6;r++}return m}function v(){if(i="",l=0,s=r,a=f,u=c,r>=n)return s=n,o=17;let m=e.charCodeAt(r);if(De(m)){do r++,i+=String.fromCharCode(m),m=e.charCodeAt(r);while(De(m));return o=15}if(Ae(m))return r++,i+=String.fromCharCode(m),m===13&&e.charCodeAt(r)===10&&(r++,i+=`
`),f++,c=r,o=14;switch(m){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,i=d(),o=10;case 47:const S=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<n&&!Ae(e.charCodeAt(r));)r++;return i=e.substring(S,r),o=12}if(e.charCodeAt(r+1)===42){r+=2;const b=n-1;let T=!1;for(;r<b;){const O=e.charCodeAt(r);if(O===42&&e.charCodeAt(r+1)===47){r+=2,T=!0;break}r++,Ae(O)&&(O===13&&e.charCodeAt(r)===10&&r++,f++,c=r)}return T||(r++,l=1),i=e.substring(S,r),o=13}return i+=String.fromCharCode(m),r++,o=16;case 45:if(i+=String.fromCharCode(m),r++,r===n||!pe(e.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=g(),o=11;default:for(;r<n&&A(m);)r++,m=e.charCodeAt(r);if(s!==r){switch(i=e.substring(s,r),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(m),r++,o=16}}function A(m){if(De(m)||Ae(m))return!1;switch(m){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function w(){let m;do m=v();while(m>=12&&m<=15);return m}return{setPosition:p,getPosition:()=>r,scan:t?w:v,getToken:()=>o,getTokenValue:()=>i,getTokenOffset:()=>s,getTokenLength:()=>r-s,getTokenStartLine:()=>a,getTokenStartCharacter:()=>s-u,getTokenError:()=>l}}function De(e){return e===32||e===9}function Ae(e){return e===10||e===13}function pe(e){return e>=48&&e<=57}var ut;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(ut||(ut={}));var Q=new Array(20).fill(0).map((e,t)=>" ".repeat(t)),ge=200,ht={" ":{"\n":new Array(ge).fill(0).map((e,t)=>`
`+" ".repeat(t)),"\r":new Array(ge).fill(0).map((e,t)=>"\r"+" ".repeat(t)),"\r\n":new Array(ge).fill(0).map((e,t)=>`\r
`+" ".repeat(t))},"	":{"\n":new Array(ge).fill(0).map((e,t)=>`
`+"	".repeat(t)),"\r":new Array(ge).fill(0).map((e,t)=>"\r"+"	".repeat(t)),"\r\n":new Array(ge).fill(0).map((e,t)=>`\r
`+"	".repeat(t))}},Bn=[`
`,"\r",`\r
`];function qn(e,t,n){let r,i,s,o,f;if(t){for(o=t.offset,f=o+t.length,s=o;s>0&&!pt(e,s-1);)s--;let b=f;for(;b<e.length&&!pt(e,b);)b++;i=e.substring(s,b),r=Jn(i,n)}else i=e,r=0,s=0,o=0,f=e.length;const a=Wn(n,e),c=Bn.includes(a);let u=0,l=0,h;n.insertSpaces?h=Q[n.tabSize||4]??de(Q[1],n.tabSize||4):h="	";const p=h==="	"?"	":" ";let g=ft(i,!1),d=!1;function v(){if(u>1)return de(a,u)+de(h,r+l);const b=h.length*(r+l);return!c||b>ht[p][a].length?a+de(h,r+l):b<=0?a:ht[p][a][b]}function A(){let b=g.scan();for(u=0;b===15||b===14;)b===14&&n.keepLines?u+=1:b===14&&(u=1),b=g.scan();return d=b===16||g.getTokenError()!==0,b}const w=[];function m(b,T,O){!d&&(!t||T<f&&O>o)&&e.substring(T,O)!==b&&w.push({offset:T,length:O-T,content:b})}let S=A();if(n.keepLines&&u>0&&m(de(a,u),0,0),S!==17){let b=g.getTokenOffset()+s,T=h.length*r<20&&n.insertSpaces?Q[h.length*r]:de(h,r);m(T,s,b)}for(;S!==17;){let b=g.getTokenOffset()+g.getTokenLength()+s,T=A(),O="",I=!1;for(;u===0&&(T===12||T===13);){let $=g.getTokenOffset()+s;m(Q[1],b,$),b=g.getTokenOffset()+g.getTokenLength()+s,I=T===12,O=I?v():"",T=A()}if(T===2)S!==1&&l--,n.keepLines&&u>0||!n.keepLines&&S!==1?O=v():n.keepLines&&(O=Q[1]);else if(T===4)S!==3&&l--,n.keepLines&&u>0||!n.keepLines&&S!==3?O=v():n.keepLines&&(O=Q[1]);else{switch(S){case 3:case 1:l++,n.keepLines&&u>0||!n.keepLines?O=v():O=Q[1];break;case 5:n.keepLines&&u>0||!n.keepLines?O=v():O=Q[1];break;case 12:O=v();break;case 13:u>0?O=v():I||(O=Q[1]);break;case 6:n.keepLines&&u>0?O=v():I||(O=Q[1]);break;case 10:n.keepLines&&u>0?O=v():T===6&&!I&&(O="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&u>0?O=v():(T===12||T===13)&&!I?O=Q[1]:T!==5&&T!==17&&(d=!0);break;case 16:d=!0;break}u>0&&(T===12||T===13)&&(O=v())}T===17&&(n.keepLines&&u>0?O=v():O=n.insertFinalNewline?a:"");const V=g.getTokenOffset()+s;m(O,b,V),S=T}return w}function de(e,t){let n="";for(let r=0;r<t;r++)n+=e;return n}function Jn(e,t){let n=0,r=0;const i=t.tabSize||4;for(;n<e.length;){let s=e.charAt(n);if(s===Q[1])r++;else if(s==="	")r+=i;else break;n++}return Math.floor(r/i)}function Wn(e,t){for(let n=0;n<t.length;n++){const r=t.charAt(n);if(r==="\r")return n+1<t.length&&t.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return e&&e.eol||`
`}function pt(e,t){return`\r
`.indexOf(e.charAt(t))!==-1}var Me;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Me||(Me={}));function zn(e,t=[],n=Me.DEFAULT){let r=null,i=[];const s=[];function o(a){Array.isArray(i)?i.push(a):r!==null&&(i[r]=a)}return Gn(e,{onObjectBegin:()=>{const a={};o(a),s.push(i),i=a,r=null},onObjectProperty:a=>{r=a},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const a=[];o(a),s.push(i),i=a,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(a,c,u)=>{t.push({error:a,offset:c,length:u})}},n),i[0]}function Tn(e){if(!e.parent||!e.parent.children)return[];const t=Tn(e.parent);if(e.parent.type==="property"){const n=e.parent.children[0].value;t.push(n)}else if(e.parent.type==="array"){const n=e.parent.children.indexOf(e);n!==-1&&t.push(n)}return t}function qe(e){switch(e.type){case"array":return e.children.map(qe);case"object":const t=Object.create(null);for(let n of e.children){const r=n.children[1];r&&(t[n.children[0].value]=qe(r))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function Hn(e,t,n=!1){return t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}function xn(e,t,n=!1){if(Hn(e,t,n)){const r=e.children;if(Array.isArray(r))for(let i=0;i<r.length&&r[i].offset<=t;i++){const s=xn(r[i],t,n);if(s)return s}return e}}function Gn(e,t,n=Me.DEFAULT){const r=ft(e,!1),i=[];function s(x){return x?()=>x(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function o(x){return x?()=>x(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}function f(x){return x?L=>x(L,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(x){return x?L=>x(L,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}const c=o(t.onObjectBegin),u=a(t.onObjectProperty),l=s(t.onObjectEnd),h=o(t.onArrayBegin),p=s(t.onArrayEnd),g=a(t.onLiteralValue),d=f(t.onSeparator),v=s(t.onComment),A=f(t.onError),w=n&&n.disallowComments,m=n&&n.allowTrailingComma;function S(){for(;;){const x=r.scan();switch(r.getTokenError()){case 4:b(14);break;case 5:b(15);break;case 3:b(13);break;case 1:w||b(11);break;case 2:b(12);break;case 6:b(16);break}switch(x){case 12:case 13:w?b(10):v();break;case 16:b(1);break;case 15:case 14:break;default:return x}}}function b(x,L=[],P=[]){if(A(x),L.length+P.length>0){let F=r.getToken();for(;F!==17;){if(L.indexOf(F)!==-1){S();break}else if(P.indexOf(F)!==-1)break;F=S()}}}function T(x){const L=r.getTokenValue();return x?g(L):(u(L),i.push(L)),S(),!0}function O(){switch(r.getToken()){case 11:const x=r.getTokenValue();let L=Number(x);isNaN(L)&&(b(2),L=0),g(L);break;case 7:g(null);break;case 8:g(!0);break;case 9:g(!1);break;default:return!1}return S(),!0}function I(){return r.getToken()!==10?(b(3,[],[2,5]),!1):(T(!1),r.getToken()===6?(d(":"),S(),N()||b(4,[],[2,5])):b(5,[],[2,5]),i.pop(),!0)}function V(){c(),S();let x=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(x||b(4,[],[]),d(","),S(),r.getToken()===2&&m)break}else x&&b(6,[],[]);I()||b(4,[],[2,5]),x=!0}return l(),r.getToken()!==2?b(7,[2],[]):S(),!0}function $(){h(),S();let x=!0,L=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(L||b(4,[],[]),d(","),S(),r.getToken()===4&&m)break}else L&&b(6,[],[]);x?(i.push(0),x=!1):i[i.length-1]++,N()||b(4,[],[4,5]),L=!0}return p(),x||i.pop(),r.getToken()!==4?b(8,[4],[]):S(),!0}function N(){switch(r.getToken()){case 3:return $();case 1:return V();case 10:return T(!0);default:return O()}}return S(),r.getToken()===17?n.allowEmptyContent?!0:(b(4,[],[]),!1):N()?(r.getToken()!==17&&b(9,[],[]),!0):(b(4,[],[]),!1)}var ce=ft,gt;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(gt||(gt={}));var dt;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(dt||(dt={}));var Xn=zn,Zn=xn,Qn=Tn,Yn=qe,mt;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(mt||(mt={}));function Cn(e,t,n){return qn(e,t,n)}function me(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!me(e[n],t[n]))return!1}else{const i=[];for(r in e)i.push(r);i.sort();const s=[];for(r in t)s.push(r);if(s.sort(),!me(i,s))return!1;for(n=0;n<i.length;n++)if(!me(e[i[n]],t[i[n]]))return!1}return!0}function W(e){return typeof e=="number"}function Y(e){return typeof e<"u"}function ne(e){return typeof e=="boolean"}function wn(e){return typeof e=="string"}function le(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Kn(e,t){if(e.length<t.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}function we(e,t){const n=e.length-t.length;return n>0?e.lastIndexOf(t)===n:n===0?e===t:!1}function Ee(e){let t="";Kn(e,"(?i)")&&(e=e.substring(4),t="i");try{return new RegExp(e,t+"u")}catch{try{return new RegExp(e,t)}catch{return}}}function yt(e){let t=0;for(let n=0;n<e.length;n++){t++;const r=e.charCodeAt(n);55296<=r&&r<=56319&&n++}return t}var vt;(function(e){function t(n){return typeof n=="string"}e.is=t})(vt||(vt={}));var Je;(function(e){function t(n){return typeof n=="string"}e.is=t})(Je||(Je={}));var bt;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(bt||(bt={}));var je;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(je||(je={}));var D;(function(e){function t(r,i){return r===Number.MAX_VALUE&&(r=je.MAX_VALUE),i===Number.MAX_VALUE&&(i=je.MAX_VALUE),{line:r,character:i}}e.create=t;function n(r){let i=r;return y.objectLiteral(i)&&y.uinteger(i.line)&&y.uinteger(i.character)}e.is=n})(D||(D={}));var M;(function(e){function t(r,i,s,o){if(y.uinteger(r)&&y.uinteger(i)&&y.uinteger(s)&&y.uinteger(o))return{start:D.create(r,i),end:D.create(s,o)};if(D.is(r)&&D.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${s}, ${o}]`)}e.create=t;function n(r){let i=r;return y.objectLiteral(i)&&D.is(i.start)&&D.is(i.end)}e.is=n})(M||(M={}));var ye;(function(e){function t(r,i){return{uri:r,range:i}}e.create=t;function n(r){let i=r;return y.objectLiteral(i)&&M.is(i.range)&&(y.string(i.uri)||y.undefined(i.uri))}e.is=n})(ye||(ye={}));var kt;(function(e){function t(r,i,s,o){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}e.create=t;function n(r){let i=r;return y.objectLiteral(i)&&M.is(i.targetRange)&&y.string(i.targetUri)&&M.is(i.targetSelectionRange)&&(M.is(i.originSelectionRange)||y.undefined(i.originSelectionRange))}e.is=n})(kt||(kt={}));var We;(function(e){function t(r,i,s,o){return{red:r,green:i,blue:s,alpha:o}}e.create=t;function n(r){const i=r;return y.objectLiteral(i)&&y.numberRange(i.red,0,1)&&y.numberRange(i.green,0,1)&&y.numberRange(i.blue,0,1)&&y.numberRange(i.alpha,0,1)}e.is=n})(We||(We={}));var At;(function(e){function t(r,i){return{range:r,color:i}}e.create=t;function n(r){const i=r;return y.objectLiteral(i)&&M.is(i.range)&&We.is(i.color)}e.is=n})(At||(At={}));var St;(function(e){function t(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}e.create=t;function n(r){const i=r;return y.objectLiteral(i)&&y.string(i.label)&&(y.undefined(i.textEdit)||re.is(i))&&(y.undefined(i.additionalTextEdits)||y.typedArray(i.additionalTextEdits,re.is))}e.is=n})(St||(St={}));var xe;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(xe||(xe={}));var Tt;(function(e){function t(r,i,s,o,f,a){const c={startLine:r,endLine:i};return y.defined(s)&&(c.startCharacter=s),y.defined(o)&&(c.endCharacter=o),y.defined(f)&&(c.kind=f),y.defined(a)&&(c.collapsedText=a),c}e.create=t;function n(r){const i=r;return y.objectLiteral(i)&&y.uinteger(i.startLine)&&y.uinteger(i.startLine)&&(y.undefined(i.startCharacter)||y.uinteger(i.startCharacter))&&(y.undefined(i.endCharacter)||y.uinteger(i.endCharacter))&&(y.undefined(i.kind)||y.string(i.kind))}e.is=n})(Tt||(Tt={}));var ze;(function(e){function t(r,i){return{location:r,message:i}}e.create=t;function n(r){let i=r;return y.defined(i)&&ye.is(i.location)&&y.string(i.message)}e.is=n})(ze||(ze={}));var X;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(X||(X={}));var xt;(function(e){e.Unnecessary=1,e.Deprecated=2})(xt||(xt={}));var wt;(function(e){function t(n){const r=n;return y.objectLiteral(r)&&y.string(r.href)}e.is=t})(wt||(wt={}));var ie;(function(e){function t(r,i,s,o,f,a){let c={range:r,message:i};return y.defined(s)&&(c.severity=s),y.defined(o)&&(c.code=o),y.defined(f)&&(c.source=f),y.defined(a)&&(c.relatedInformation=a),c}e.create=t;function n(r){var i;let s=r;return y.defined(s)&&M.is(s.range)&&y.string(s.message)&&(y.number(s.severity)||y.undefined(s.severity))&&(y.integer(s.code)||y.string(s.code)||y.undefined(s.code))&&(y.undefined(s.codeDescription)||y.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(y.string(s.source)||y.undefined(s.source))&&(y.undefined(s.relatedInformation)||y.typedArray(s.relatedInformation,ze.is))}e.is=n})(ie||(ie={}));var ve;(function(e){function t(r,i,...s){let o={title:r,command:i};return y.defined(s)&&s.length>0&&(o.arguments=s),o}e.create=t;function n(r){let i=r;return y.defined(i)&&y.string(i.title)&&y.string(i.command)}e.is=n})(ve||(ve={}));var re;(function(e){function t(s,o){return{range:s,newText:o}}e.replace=t;function n(s,o){return{range:{start:s,end:s},newText:o}}e.insert=n;function r(s){return{range:s,newText:""}}e.del=r;function i(s){const o=s;return y.objectLiteral(o)&&y.string(o.newText)&&M.is(o.range)}e.is=i})(re||(re={}));var He;(function(e){function t(r,i,s){const o={label:r};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}e.create=t;function n(r){const i=r;return y.objectLiteral(i)&&y.string(i.label)&&(y.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(y.string(i.description)||i.description===void 0)}e.is=n})(He||(He={}));var be;(function(e){function t(n){const r=n;return y.string(r)}e.is=t})(be||(be={}));var Nt;(function(e){function t(s,o,f){return{range:s,newText:o,annotationId:f}}e.replace=t;function n(s,o,f){return{range:{start:s,end:s},newText:o,annotationId:f}}e.insert=n;function r(s,o){return{range:s,newText:"",annotationId:o}}e.del=r;function i(s){const o=s;return re.is(o)&&(He.is(o.annotationId)||be.is(o.annotationId))}e.is=i})(Nt||(Nt={}));var Ge;(function(e){function t(r,i){return{textDocument:r,edits:i}}e.create=t;function n(r){let i=r;return y.defined(i)&&Ce.is(i.textDocument)&&Array.isArray(i.edits)}e.is=n})(Ge||(Ge={}));var Xe;(function(e){function t(r,i,s){let o={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}e.create=t;function n(r){let i=r;return i&&i.kind==="create"&&y.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||y.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||y.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||be.is(i.annotationId))}e.is=n})(Xe||(Xe={}));var Ze;(function(e){function t(r,i,s,o){let f={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(f.options=s),o!==void 0&&(f.annotationId=o),f}e.create=t;function n(r){let i=r;return i&&i.kind==="rename"&&y.string(i.oldUri)&&y.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||y.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||y.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||be.is(i.annotationId))}e.is=n})(Ze||(Ze={}));var Qe;(function(e){function t(r,i,s){let o={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}e.create=t;function n(r){let i=r;return i&&i.kind==="delete"&&y.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||y.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||y.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||be.is(i.annotationId))}e.is=n})(Qe||(Qe={}));var Ye;(function(e){function t(n){let r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>y.string(i.kind)?Xe.is(i)||Ze.is(i)||Qe.is(i):Ge.is(i)))}e.is=t})(Ye||(Ye={}));var Ot;(function(e){function t(r){return{uri:r}}e.create=t;function n(r){let i=r;return y.defined(i)&&y.string(i.uri)}e.is=n})(Ot||(Ot={}));var Lt;(function(e){function t(r,i){return{uri:r,version:i}}e.create=t;function n(r){let i=r;return y.defined(i)&&y.string(i.uri)&&y.integer(i.version)}e.is=n})(Lt||(Lt={}));var Ce;(function(e){function t(r,i){return{uri:r,version:i}}e.create=t;function n(r){let i=r;return y.defined(i)&&y.string(i.uri)&&(i.version===null||y.integer(i.version))}e.is=n})(Ce||(Ce={}));var It;(function(e){function t(r,i,s,o){return{uri:r,languageId:i,version:s,text:o}}e.create=t;function n(r){let i=r;return y.defined(i)&&y.string(i.uri)&&y.string(i.languageId)&&y.integer(i.version)&&y.string(i.text)}e.is=n})(It||(It={}));var ue;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(n){const r=n;return r===e.PlainText||r===e.Markdown}e.is=t})(ue||(ue={}));var Ne;(function(e){function t(n){const r=n;return y.objectLiteral(n)&&ue.is(r.kind)&&y.string(r.value)}e.is=t})(Ne||(Ne={}));var G;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(G||(G={}));var R;(function(e){e.PlainText=1,e.Snippet=2})(R||(R={}));var Pt;(function(e){e.Deprecated=1})(Pt||(Pt={}));var Vt;(function(e){function t(r,i,s){return{newText:r,insert:i,replace:s}}e.create=t;function n(r){const i=r;return i&&y.string(i.newText)&&M.is(i.insert)&&M.is(i.replace)}e.is=n})(Vt||(Vt={}));var Mt;(function(e){e.asIs=1,e.adjustIndentation=2})(Mt||(Mt={}));var Et;(function(e){function t(n){const r=n;return r&&(y.string(r.detail)||r.detail===void 0)&&(y.string(r.description)||r.description===void 0)}e.is=t})(Et||(Et={}));var Ke;(function(e){function t(n){return{label:n}}e.create=t})(Ke||(Ke={}));var jt;(function(e){function t(n,r){return{items:n||[],isIncomplete:!!r}}e.create=t})(jt||(jt={}));var _e;(function(e){function t(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function n(r){const i=r;return y.string(i)||y.objectLiteral(i)&&y.string(i.language)&&y.string(i.value)}e.is=n})(_e||(_e={}));var _t;(function(e){function t(n){let r=n;return!!r&&y.objectLiteral(r)&&(Ne.is(r.contents)||_e.is(r.contents)||y.typedArray(r.contents,_e.is))&&(n.range===void 0||M.is(n.range))}e.is=t})(_t||(_t={}));var Ft;(function(e){function t(n,r){return r?{label:n,documentation:r}:{label:n}}e.create=t})(Ft||(Ft={}));var $t;(function(e){function t(n,r,...i){let s={label:n};return y.defined(r)&&(s.documentation=r),y.defined(i)?s.parameters=i:s.parameters=[],s}e.create=t})($t||($t={}));var Dt;(function(e){e.Text=1,e.Read=2,e.Write=3})(Dt||(Dt={}));var Ut;(function(e){function t(n,r){let i={range:n};return y.number(r)&&(i.kind=r),i}e.create=t})(Ut||(Ut={}));var te;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(te||(te={}));var Rt;(function(e){e.Deprecated=1})(Rt||(Rt={}));var Bt;(function(e){function t(n,r,i,s,o){let f={name:n,kind:r,location:{uri:s,range:i}};return o&&(f.containerName=o),f}e.create=t})(Bt||(Bt={}));var qt;(function(e){function t(n,r,i,s){return s!==void 0?{name:n,kind:r,location:{uri:i,range:s}}:{name:n,kind:r,location:{uri:i}}}e.create=t})(qt||(qt={}));var Jt;(function(e){function t(r,i,s,o,f,a){let c={name:r,detail:i,kind:s,range:o,selectionRange:f};return a!==void 0&&(c.children=a),c}e.create=t;function n(r){let i=r;return i&&y.string(i.name)&&y.number(i.kind)&&M.is(i.range)&&M.is(i.selectionRange)&&(i.detail===void 0||y.string(i.detail))&&(i.deprecated===void 0||y.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}e.is=n})(Jt||(Jt={}));var Wt;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(Wt||(Wt={}));var Fe;(function(e){e.Invoked=1,e.Automatic=2})(Fe||(Fe={}));var zt;(function(e){function t(r,i,s){let o={diagnostics:r};return i!=null&&(o.only=i),s!=null&&(o.triggerKind=s),o}e.create=t;function n(r){let i=r;return y.defined(i)&&y.typedArray(i.diagnostics,ie.is)&&(i.only===void 0||y.typedArray(i.only,y.string))&&(i.triggerKind===void 0||i.triggerKind===Fe.Invoked||i.triggerKind===Fe.Automatic)}e.is=n})(zt||(zt={}));var Ht;(function(e){function t(r,i,s){let o={title:r},f=!0;return typeof i=="string"?(f=!1,o.kind=i):ve.is(i)?o.command=i:o.edit=i,f&&s!==void 0&&(o.kind=s),o}e.create=t;function n(r){let i=r;return i&&y.string(i.title)&&(i.diagnostics===void 0||y.typedArray(i.diagnostics,ie.is))&&(i.kind===void 0||y.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ve.is(i.command))&&(i.isPreferred===void 0||y.boolean(i.isPreferred))&&(i.edit===void 0||Ye.is(i.edit))}e.is=n})(Ht||(Ht={}));var Gt;(function(e){function t(r,i){let s={range:r};return y.defined(i)&&(s.data=i),s}e.create=t;function n(r){let i=r;return y.defined(i)&&M.is(i.range)&&(y.undefined(i.command)||ve.is(i.command))}e.is=n})(Gt||(Gt={}));var Xt;(function(e){function t(r,i){return{tabSize:r,insertSpaces:i}}e.create=t;function n(r){let i=r;return y.defined(i)&&y.uinteger(i.tabSize)&&y.boolean(i.insertSpaces)}e.is=n})(Xt||(Xt={}));var Zt;(function(e){function t(r,i,s){return{range:r,target:i,data:s}}e.create=t;function n(r){let i=r;return y.defined(i)&&M.is(i.range)&&(y.undefined(i.target)||y.string(i.target))}e.is=n})(Zt||(Zt={}));var $e;(function(e){function t(r,i){return{range:r,parent:i}}e.create=t;function n(r){let i=r;return y.objectLiteral(i)&&M.is(i.range)&&(i.parent===void 0||e.is(i.parent))}e.is=n})($e||($e={}));var Qt;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(Qt||(Qt={}));var Yt;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(Yt||(Yt={}));var Ct;(function(e){function t(n){const r=n;return y.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}e.is=t})(Ct||(Ct={}));var Kt;(function(e){function t(r,i){return{range:r,text:i}}e.create=t;function n(r){const i=r;return i!=null&&M.is(i.range)&&y.string(i.text)}e.is=n})(Kt||(Kt={}));var en;(function(e){function t(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}e.create=t;function n(r){const i=r;return i!=null&&M.is(i.range)&&y.boolean(i.caseSensitiveLookup)&&(y.string(i.variableName)||i.variableName===void 0)}e.is=n})(en||(en={}));var tn;(function(e){function t(r,i){return{range:r,expression:i}}e.create=t;function n(r){const i=r;return i!=null&&M.is(i.range)&&(y.string(i.expression)||i.expression===void 0)}e.is=n})(tn||(tn={}));var nn;(function(e){function t(r,i){return{frameId:r,stoppedLocation:i}}e.create=t;function n(r){const i=r;return y.defined(i)&&M.is(r.stoppedLocation)}e.is=n})(nn||(nn={}));var et;(function(e){e.Type=1,e.Parameter=2;function t(n){return n===1||n===2}e.is=t})(et||(et={}));var tt;(function(e){function t(r){return{value:r}}e.create=t;function n(r){const i=r;return y.objectLiteral(i)&&(i.tooltip===void 0||y.string(i.tooltip)||Ne.is(i.tooltip))&&(i.location===void 0||ye.is(i.location))&&(i.command===void 0||ve.is(i.command))}e.is=n})(tt||(tt={}));var rn;(function(e){function t(r,i,s){const o={position:r,label:i};return s!==void 0&&(o.kind=s),o}e.create=t;function n(r){const i=r;return y.objectLiteral(i)&&D.is(i.position)&&(y.string(i.label)||y.typedArray(i.label,tt.is))&&(i.kind===void 0||et.is(i.kind))&&i.textEdits===void 0||y.typedArray(i.textEdits,re.is)&&(i.tooltip===void 0||y.string(i.tooltip)||Ne.is(i.tooltip))&&(i.paddingLeft===void 0||y.boolean(i.paddingLeft))&&(i.paddingRight===void 0||y.boolean(i.paddingRight))}e.is=n})(rn||(rn={}));var sn;(function(e){function t(n){return{kind:"snippet",value:n}}e.createSnippet=t})(sn||(sn={}));var on;(function(e){function t(n,r,i,s){return{insertText:n,filterText:r,range:i,command:s}}e.create=t})(on||(on={}));var an;(function(e){function t(n){return{items:n}}e.create=t})(an||(an={}));var ln;(function(e){e.Invoked=0,e.Automatic=1})(ln||(ln={}));var cn;(function(e){function t(n,r){return{range:n,text:r}}e.create=t})(cn||(cn={}));var fn;(function(e){function t(n,r){return{triggerKind:n,selectedCompletionInfo:r}}e.create=t})(fn||(fn={}));var un;(function(e){function t(n){const r=n;return y.objectLiteral(r)&&Je.is(r.uri)&&y.string(r.name)}e.is=t})(un||(un={}));var hn;(function(e){function t(s,o,f,a){return new er(s,o,f,a)}e.create=t;function n(s){let o=s;return!!(y.defined(o)&&y.string(o.uri)&&(y.undefined(o.languageId)||y.string(o.languageId))&&y.uinteger(o.lineCount)&&y.func(o.getText)&&y.func(o.positionAt)&&y.func(o.offsetAt))}e.is=n;function r(s,o){let f=s.getText(),a=i(o,(u,l)=>{let h=u.range.start.line-l.range.start.line;return h===0?u.range.start.character-l.range.start.character:h}),c=f.length;for(let u=a.length-1;u>=0;u--){let l=a[u],h=s.offsetAt(l.range.start),p=s.offsetAt(l.range.end);if(p<=c)f=f.substring(0,h)+l.newText+f.substring(p,f.length);else throw new Error("Overlapping edit");c=h}return f}e.applyEdits=r;function i(s,o){if(s.length<=1)return s;const f=s.length/2|0,a=s.slice(0,f),c=s.slice(f);i(a,o),i(c,o);let u=0,l=0,h=0;for(;u<a.length&&l<c.length;)o(a[u],c[l])<=0?s[h++]=a[u++]:s[h++]=c[l++];for(;u<a.length;)s[h++]=a[u++];for(;l<c.length;)s[h++]=c[l++];return s}})(hn||(hn={}));var er=class{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],t=this._content,n=!0;for(let r=0;r<t.length;r++){n&&(e.push(r),n=!1);let i=t.charAt(r);n=i==="\r"||i===`
`,i==="\r"&&r+1<t.length&&t.charAt(r+1)===`
`&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(r===0)return D.create(0,e);for(;n<r;){let s=Math.floor((n+r)/2);t[s]>e?r=s:n=s+1}let i=n-1;return D.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)}get lineCount(){return this.getLineOffsets().length}},y;(function(e){const t=Object.prototype.toString;function n(p){return typeof p<"u"}e.defined=n;function r(p){return typeof p>"u"}e.undefined=r;function i(p){return p===!0||p===!1}e.boolean=i;function s(p){return t.call(p)==="[object String]"}e.string=s;function o(p){return t.call(p)==="[object Number]"}e.number=o;function f(p,g,d){return t.call(p)==="[object Number]"&&g<=p&&p<=d}e.numberRange=f;function a(p){return t.call(p)==="[object Number]"&&-2147483648<=p&&p<=2147483647}e.integer=a;function c(p){return t.call(p)==="[object Number]"&&0<=p&&p<=2147483647}e.uinteger=c;function u(p){return t.call(p)==="[object Function]"}e.func=u;function l(p){return p!==null&&typeof p=="object"}e.objectLiteral=l;function h(p,g){return Array.isArray(p)&&p.every(g)}e.typedArray=h})(y||(y={}));var pn=class nt{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){const n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(nt.isIncremental(r)){const i=Nn(r.range),s=this.offsetAt(i.start),o=this.offsetAt(i.end);this._content=this._content.substring(0,s)+r.text+this._content.substring(o,this._content.length);const f=Math.max(i.start.line,0),a=Math.max(i.end.line,0);let c=this._lineOffsets;const u=gn(r.text,!1,s);if(a-f===u.length)for(let h=0,p=u.length;h<p;h++)c[h+f+1]=u[h];else u.length<1e4?c.splice(f+1,a-f,...u):this._lineOffsets=c=c.slice(0,f+1).concat(u,c.slice(a+1));const l=r.text.length-(o-s);if(l!==0)for(let h=f+1+u.length,p=c.length;h<p;h++)c[h]=c[h]+l}else if(nt.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=gn(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let o=Math.floor((r+i)/2);n[o]>t?i=o:r=o+1}let s=r-1;return{line:s,character:t-n[s]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line],i=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,i),r)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},K;(function(e){function t(i,s,o,f){return new pn(i,s,o,f)}e.create=t;function n(i,s,o){if(i instanceof pn)return i.update(s,o),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,s){let o=i.getText(),f=rt(s.map(tr),(u,l)=>{let h=u.range.start.line-l.range.start.line;return h===0?u.range.start.character-l.range.start.character:h}),a=0;const c=[];for(const u of f){let l=i.offsetAt(u.range.start);if(l<a)throw new Error("Overlapping edit");l>a&&c.push(o.substring(a,l)),u.newText.length&&c.push(u.newText),a=i.offsetAt(u.range.end)}return c.push(o.substr(a)),c.join("")}e.applyEdits=r})(K||(K={}));function rt(e,t){if(e.length<=1)return e;const n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);rt(r,t),rt(i,t);let s=0,o=0,f=0;for(;s<r.length&&o<i.length;)t(r[s],i[o])<=0?e[f++]=r[s++]:e[f++]=i[o++];for(;s<r.length;)e[f++]=r[s++];for(;o<i.length;)e[f++]=i[o++];return e}function gn(e,t,n=0){const r=t?[n]:[];for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);(s===13||s===10)&&(s===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Nn(e){const t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function tr(e){const t=Nn(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var _;(function(e){e[e.Undefined=0]="Undefined",e[e.EnumValueMismatch=1]="EnumValueMismatch",e[e.Deprecated=2]="Deprecated",e[e.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=258]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",e[e.InvalidUnicode=260]="InvalidUnicode",e[e.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",e[e.InvalidCharacter=262]="InvalidCharacter",e[e.PropertyExpected=513]="PropertyExpected",e[e.CommaExpected=514]="CommaExpected",e[e.ColonExpected=515]="ColonExpected",e[e.ValueExpected=516]="ValueExpected",e[e.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",e[e.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",e[e.TrailingComma=519]="TrailingComma",e[e.DuplicateKey=520]="DuplicateKey",e[e.CommentNotPermitted=521]="CommentNotPermitted",e[e.PropertyKeysMustBeDoublequoted=528]="PropertyKeysMustBeDoublequoted",e[e.SchemaResolveError=768]="SchemaResolveError",e[e.SchemaUnsupportedFeature=769]="SchemaUnsupportedFeature"})(_||(_={}));var C;(function(e){e[e.v3=3]="v3",e[e.v4=4]="v4",e[e.v6=6]="v6",e[e.v7=7]="v7",e[e.v2019_09=19]="v2019_09",e[e.v2020_12=20]="v2020_12"})(C||(C={}));var it;(function(e){e.LATEST={textDocument:{completion:{completionItem:{documentationFormat:[ue.Markdown,ue.PlainText],commitCharactersSupport:!0,labelDetailsSupport:!0}}}}})(it||(it={}));function k(...e){const t=e[0];let n,r,i;if(typeof t=="string")n=t,r=t,e.splice(0,1),i=!e||typeof e[0]!="object"?e:e[0];else if(t instanceof Array){const s=e.slice(1);if(t.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let o=t[0];for(let f=1;f<t.length;f++)o+=`{${f-1}}`+t[f];return k(o,...s)}else r=t.message,n=r,t.comment&&t.comment.length>0&&(n+=`/${Array.isArray(t.comment)?t.comment.join(""):t.comment}`),i=t.args??{};return rr(r,i)}var nr=/{([^}]+)}/g;function rr(e,t){return Object.keys(t).length===0?e:e.replace(nr,(n,r)=>t[r]??n)}var ir={"color-hex":{errorMessage:k("Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:k("String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:k("String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:k("String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:k("String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}))$/},hostname:{errorMessage:k("String is not a hostname."),pattern:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i},ipv4:{errorMessage:k("String is not an IPv4 address."),pattern:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/},ipv6:{errorMessage:k("String is not an IPv6 address."),pattern:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i}},he=class{constructor(e,t,n=0){this.offset=t,this.length=n,this.parent=e}get children(){return[]}toString(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")}},sr=class extends he{constructor(e,t){super(e,t),this.type="null",this.value=null}},dn=class extends he{constructor(e,t,n){super(e,n),this.type="boolean",this.value=t}},or=class extends he{constructor(e,t){super(e,t),this.type="array",this.items=[]}get children(){return this.items}},ar=class extends he{constructor(e,t){super(e,t),this.type="number",this.isInteger=!0,this.value=Number.NaN}},Ue=class extends he{constructor(e,t,n){super(e,t,n),this.type="string",this.value=""}},lr=class extends he{constructor(e,t,n){super(e,t),this.type="property",this.colonOffset=-1,this.keyNode=n}get children(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]}},cr=class extends he{constructor(e,t){super(e,t),this.type="object",this.properties=[]}get children(){return this.properties}};function H(e){return ne(e)?e?{}:{not:{}}:e}var mn;(function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"})(mn||(mn={}));var fr={"http://json-schema.org/draft-03/schema#":C.v3,"http://json-schema.org/draft-04/schema#":C.v4,"http://json-schema.org/draft-06/schema#":C.v6,"http://json-schema.org/draft-07/schema#":C.v7,"https://json-schema.org/draft/2019-09/schema":C.v2019_09,"https://json-schema.org/draft/2020-12/schema":C.v2020_12},yn=class{constructor(e){this.schemaDraft=e}},ur=class On{constructor(t=-1,n){this.focusOffset=t,this.exclude=n,this.schemas=[]}add(t){this.schemas.push(t)}merge(t){Array.prototype.push.apply(this.schemas,t.schemas)}include(t){return(this.focusOffset===-1||Ln(t,this.focusOffset))&&t!==this.exclude}newSub(){return new On(-1,this.exclude)}},Oe=class{constructor(){}get schemas(){return[]}add(e){}merge(e){}include(e){return!0}newSub(){return this}};Oe.instance=new Oe;var z=class{constructor(){this.problems=[],this.propertiesMatches=0,this.processedProperties=new Set,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}hasProblems(){return!!this.problems.length}merge(e){this.problems=this.problems.concat(e.problems),this.propertiesMatches+=e.propertiesMatches,this.propertiesValueMatches+=e.propertiesValueMatches,this.mergeProcessedProperties(e)}mergeEnumValues(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(const t of this.problems)t.code===_.EnumValueMismatch&&(t.message=k("Value is not accepted. Valid values: {0}.",this.enumValues.map(n=>JSON.stringify(n)).join(", ")))}}mergePropertyMatch(e){this.problems=this.problems.concat(e.problems),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&e.enumValues.length===1&&this.primaryValueMatches++}mergeProcessedProperties(e){e.processedProperties.forEach(t=>this.processedProperties.add(t))}compare(e){const t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches}};function hr(e,t=[]){return new In(e,t,[])}function fe(e){return Yn(e)}function st(e){return Qn(e)}function Ln(e,t,n=!1){return t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}var In=class{constructor(e,t=[],n=[]){this.root=e,this.syntaxErrors=t,this.comments=n}getNodeFromOffset(e,t=!1){if(this.root)return Zn(this.root,e,t)}visit(e){if(this.root){const t=n=>{let r=e(n);const i=n.children;if(Array.isArray(i))for(let s=0;s<i.length&&r;s++)r=t(i[s]);return r};t(this.root)}}validate(e,t,n=X.Warning,r){if(this.root&&t){const i=new z;return J(this.root,t,i,Oe.instance,new yn(r??vn(t))),i.problems.map(s=>{const o=M.create(e.positionAt(s.location.offset),e.positionAt(s.location.offset+s.location.length));return ie.create(o,s.message,s.severity??n,s.code)})}}getMatchingSchemas(e,t=-1,n){if(this.root&&e){const r=new ur(t,n),i=vn(e),s=new yn(i);return J(this.root,e,new z,r,s),r.schemas}return[]}};function vn(e,t=C.v2020_12){let n=e.$schema;return n?fr[n]??t:t}function J(e,t,n,r,i){if(!e||!r.include(e))return;if(e.type==="property")return J(e.valueNode,t,n,r,i);const s=e;switch(o(),s.type){case"object":u(s);break;case"array":c(s);break;case"string":a(s);break;case"number":f(s);break}r.add({node:s,schema:t});function o(){var w;function l(m){return s.type===m||m==="integer"&&s.type==="number"&&s.isInteger}if(Array.isArray(t.type)?t.type.some(l)||n.problems.push({location:{offset:s.offset,length:s.length},message:t.errorMessage||k("Incorrect type. Expected one of {0}.",t.type.join(", "))}):t.type&&(l(t.type)||n.problems.push({location:{offset:s.offset,length:s.length},message:t.errorMessage||k('Incorrect type. Expected "{0}".',t.type)})),Array.isArray(t.allOf))for(const m of t.allOf){const S=new z,b=r.newSub();J(s,H(m),S,b,i),n.merge(S),r.merge(b)}const h=H(t.not);if(h){const m=new z,S=r.newSub();J(s,h,m,S,i),m.hasProblems()||n.problems.push({location:{offset:s.offset,length:s.length},message:t.errorMessage||k("Matches a schema that is not allowed.")});for(const b of S.schemas)b.inverted=!b.inverted,r.add(b)}const p=(m,S)=>{const b=[];let T;for(const O of m){const I=H(O),V=new z,$=r.newSub();if(J(s,I,V,$,i),V.hasProblems()||b.push(I),!T)T={schema:I,validationResult:V,matchingSchemas:$};else if(!S&&!V.hasProblems()&&!T.validationResult.hasProblems())T.matchingSchemas.merge($),T.validationResult.propertiesMatches+=V.propertiesMatches,T.validationResult.propertiesValueMatches+=V.propertiesValueMatches,T.validationResult.mergeProcessedProperties(V);else{const N=V.compare(T.validationResult);N>0?T={schema:I,validationResult:V,matchingSchemas:$}:N===0&&(T.matchingSchemas.merge($),T.validationResult.mergeEnumValues(V))}}return b.length>1&&S&&n.problems.push({location:{offset:s.offset,length:1},message:k("Matches multiple schemas when only one must validate.")}),T&&(n.merge(T.validationResult),r.merge(T.matchingSchemas)),b.length};Array.isArray(t.anyOf)&&p(t.anyOf,!1),Array.isArray(t.oneOf)&&p(t.oneOf,!0);const g=m=>{const S=new z,b=r.newSub();J(s,H(m),S,b,i),n.merge(S),r.merge(b)},d=(m,S,b)=>{const T=H(m),O=new z,I=r.newSub();J(s,T,O,I,i),r.merge(I),n.mergeProcessedProperties(O),O.hasProblems()?b&&g(b):S&&g(S)},v=H(t.if);if(v&&d(v,H(t.then),H(t.else)),Array.isArray(t.enum)){const m=fe(s);let S=!1;for(const b of t.enum)if(me(m,b)){S=!0;break}n.enumValues=t.enum,n.enumValueMatch=S,S||n.problems.push({location:{offset:s.offset,length:s.length},code:_.EnumValueMismatch,message:t.errorMessage||k("Value is not accepted. Valid values: {0}.",t.enum.map(b=>JSON.stringify(b)).join(", "))})}if(Y(t.const)){const m=fe(s);me(m,t.const)?n.enumValueMatch=!0:(n.problems.push({location:{offset:s.offset,length:s.length},code:_.EnumValueMismatch,message:t.errorMessage||k("Value must be {0}.",JSON.stringify(t.const))}),n.enumValueMatch=!1),n.enumValues=[t.const]}let A=t.deprecationMessage;if(A||t.deprecated){A=A||k("Value is deprecated");let m=((w=s.parent)==null?void 0:w.type)==="property"?s.parent:s;n.problems.push({location:{offset:m.offset,length:m.length},severity:X.Warning,message:A,code:_.Deprecated})}}function f(l){const h=l.value;function p(S){var T;const b=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(S.toString());return b&&{value:Number(b[1]+(b[2]||"")),multiplier:(((T=b[2])==null?void 0:T.length)||0)-(parseInt(b[3])||0)}}if(W(t.multipleOf)){let S=-1;if(Number.isInteger(t.multipleOf))S=h%t.multipleOf;else{let b=p(t.multipleOf),T=p(h);if(b&&T){const O=10**Math.abs(T.multiplier-b.multiplier);T.multiplier<b.multiplier?T.value*=O:b.value*=O,S=T.value%b.value}}S!==0&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Value is not divisible by {0}.",t.multipleOf)})}function g(S,b){if(W(b))return b;if(ne(b)&&b)return S}function d(S,b){if(!ne(b)||!b)return S}const v=g(t.minimum,t.exclusiveMinimum);W(v)&&h<=v&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Value is below the exclusive minimum of {0}.",v)});const A=g(t.maximum,t.exclusiveMaximum);W(A)&&h>=A&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Value is above the exclusive maximum of {0}.",A)});const w=d(t.minimum,t.exclusiveMinimum);W(w)&&h<w&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Value is below the minimum of {0}.",w)});const m=d(t.maximum,t.exclusiveMaximum);W(m)&&h>m&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Value is above the maximum of {0}.",m)})}function a(l){if(W(t.minLength)&&yt(l.value)<t.minLength&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("String is shorter than the minimum length of {0}.",t.minLength)}),W(t.maxLength)&&yt(l.value)>t.maxLength&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("String is longer than the maximum length of {0}.",t.maxLength)}),wn(t.pattern)){const h=Ee(t.pattern);h!=null&&h.test(l.value)||n.problems.push({location:{offset:l.offset,length:l.length},message:t.patternErrorMessage||t.errorMessage||k('String does not match the pattern of "{0}".',t.pattern)})}if(t.format)switch(t.format){case"uri":case"uri-reference":{let p;if(!l.value)p=k("URI expected.");else{const g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(l.value);g?!g[2]&&t.format==="uri"&&(p=k("URI with a scheme is expected.")):p=k("URI is expected.")}p&&n.problems.push({location:{offset:l.offset,length:l.length},message:t.patternErrorMessage||t.errorMessage||k("String is not a URI: {0}",p)})}break;case"color-hex":case"date-time":case"date":case"time":case"email":case"hostname":case"ipv4":case"ipv6":const h=ir[t.format];(!l.value||!h.pattern.exec(l.value))&&n.problems.push({location:{offset:l.offset,length:l.length},message:t.patternErrorMessage||t.errorMessage||h.errorMessage})}}function c(l){let h,p;i.schemaDraft>=C.v2020_12?(h=t.prefixItems,p=Array.isArray(t.items)?void 0:t.items):(h=Array.isArray(t.items)?t.items:void 0,p=Array.isArray(t.items)?t.additionalItems:t.items);let g=0;if(h!==void 0){const A=Math.min(h.length,l.items.length);for(;g<A;g++){const w=h[g],m=H(w),S=new z,b=l.items[g];b&&(J(b,m,S,r,i),n.mergePropertyMatch(S)),n.processedProperties.add(String(g))}}if(p!==void 0&&g<l.items.length)if(typeof p=="boolean")for(p===!1&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Array has too many items according to schema. Expected {0} or fewer.",g)});g<l.items.length;g++)n.processedProperties.add(String(g)),n.propertiesValueMatches++;else for(;g<l.items.length;g++){const A=new z;J(l.items[g],p,A,r,i),n.mergePropertyMatch(A),n.processedProperties.add(String(g))}const d=H(t.contains);if(d){let A=0;for(let w=0;w<l.items.length;w++){const m=l.items[w],S=new z;J(m,d,S,Oe.instance,i),S.hasProblems()||(A++,i.schemaDraft>=C.v2020_12&&n.processedProperties.add(String(w)))}A===0&&!W(t.minContains)&&n.problems.push({location:{offset:l.offset,length:l.length},message:t.errorMessage||k("Array does not contain required item.")}),W(t.minContains)&&A<t.minContains&&n.problems.push({location:{offset:l.offset,length:l.length},message:t.errorMessage||k("Array has too few items that match the contains contraint. Expected {0} or more.",t.minContains)}),W(t.maxContains)&&A>t.maxContains&&n.problems.push({location:{offset:l.offset,length:l.length},message:t.errorMessage||k("Array has too many items that match the contains contraint. Expected {0} or less.",t.maxContains)})}const v=t.unevaluatedItems;if(v!==void 0)for(let A=0;A<l.items.length;A++){if(!n.processedProperties.has(String(A)))if(v===!1)n.problems.push({location:{offset:l.offset,length:l.length},message:k("Item does not match any validation rule from the array.")});else{const w=new z;J(l.items[A],t.unevaluatedItems,w,r,i),n.mergePropertyMatch(w)}n.processedProperties.add(String(A)),n.propertiesValueMatches++}if(W(t.minItems)&&l.items.length<t.minItems&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Array has too few items. Expected {0} or more.",t.minItems)}),W(t.maxItems)&&l.items.length>t.maxItems&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Array has too many items. Expected {0} or fewer.",t.maxItems)}),t.uniqueItems===!0){let A=function(){for(let m=0;m<w.length-1;m++){const S=w[m];for(let b=m+1;b<w.length;b++)if(me(S,w[b]))return!0}return!1};const w=fe(l);A()&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Array has duplicate items.")})}}function u(l){const h=Object.create(null),p=new Set;for(const m of l.properties){const S=m.keyNode.value;h[S]=m.valueNode,p.add(S)}if(Array.isArray(t.required)){for(const m of t.required)if(!h[m]){const S=l.parent&&l.parent.type==="property"&&l.parent.keyNode,b=S?{offset:S.offset,length:S.length}:{offset:l.offset,length:1};n.problems.push({location:b,message:k('Missing property "{0}".',m)})}}const g=m=>{p.delete(m),n.processedProperties.add(m)};if(t.properties)for(const m of Object.keys(t.properties)){g(m);const S=t.properties[m],b=h[m];if(b)if(ne(S))if(S)n.propertiesMatches++,n.propertiesValueMatches++;else{const T=b.parent;n.problems.push({location:{offset:T.keyNode.offset,length:T.keyNode.length},message:t.errorMessage||k("Property {0} is not allowed.",m)})}else{const T=new z;J(b,S,T,r,i),n.mergePropertyMatch(T)}}if(t.patternProperties)for(const m of Object.keys(t.patternProperties)){const S=Ee(m);if(S){const b=[];for(const T of p)if(S.test(T)){b.push(T);const O=h[T];if(O){const I=t.patternProperties[m];if(ne(I))if(I)n.propertiesMatches++,n.propertiesValueMatches++;else{const V=O.parent;n.problems.push({location:{offset:V.keyNode.offset,length:V.keyNode.length},message:t.errorMessage||k("Property {0} is not allowed.",T)})}else{const V=new z;J(O,I,V,r,i),n.mergePropertyMatch(V)}}}b.forEach(g)}}const d=t.additionalProperties;if(d!==void 0)for(const m of p){g(m);const S=h[m];if(S){if(d===!1){const b=S.parent;n.problems.push({location:{offset:b.keyNode.offset,length:b.keyNode.length},message:t.errorMessage||k("Property {0} is not allowed.",m)})}else if(d!==!0){const b=new z;J(S,d,b,r,i),n.mergePropertyMatch(b)}}}const v=t.unevaluatedProperties;if(v!==void 0){const m=[];for(const S of p)if(!n.processedProperties.has(S)){m.push(S);const b=h[S];if(b){if(v===!1){const T=b.parent;n.problems.push({location:{offset:T.keyNode.offset,length:T.keyNode.length},message:t.errorMessage||k("Property {0} is not allowed.",S)})}else if(v!==!0){const T=new z;J(b,v,T,r,i),n.mergePropertyMatch(T)}}}m.forEach(g)}if(W(t.maxProperties)&&l.properties.length>t.maxProperties&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Object has more properties than limit of {0}.",t.maxProperties)}),W(t.minProperties)&&l.properties.length<t.minProperties&&n.problems.push({location:{offset:l.offset,length:l.length},message:k("Object has fewer properties than the required number of {0}",t.minProperties)}),t.dependentRequired)for(const m in t.dependentRequired){const S=h[m],b=t.dependentRequired[m];S&&Array.isArray(b)&&w(m,b)}if(t.dependentSchemas)for(const m in t.dependentSchemas){const S=h[m],b=t.dependentSchemas[m];S&&le(b)&&w(m,b)}if(t.dependencies)for(const m in t.dependencies)h[m]&&w(m,t.dependencies[m]);const A=H(t.propertyNames);if(A)for(const m of l.properties){const S=m.keyNode;S&&J(S,A,n,Oe.instance,i)}function w(m,S){if(Array.isArray(S))for(const b of S)h[b]?n.propertiesValueMatches++:n.problems.push({location:{offset:l.offset,length:l.length},message:k("Object is missing property {0} required by property {1}.",b,m)});else{const b=H(S);if(b){const T=new z;J(l,b,T,r,i),n.mergePropertyMatch(T)}}}}}function pr(e,t){const n=[];let r=-1;const i=e.getText(),s=ce(i,!1),o=t&&t.collectComments?[]:void 0;function f(){for(;;){const T=s.scan();switch(u(),T){case 12:case 13:Array.isArray(o)&&o.push(M.create(e.positionAt(s.getTokenOffset()),e.positionAt(s.getTokenOffset()+s.getTokenLength())));break;case 15:case 14:break;default:return T}}}function a(T,O,I,V,$=X.Error){if(n.length===0||I!==r){const N=M.create(e.positionAt(I),e.positionAt(V));n.push(ie.create(N,T,$,O,e.languageId)),r=I}}function c(T,O,I=void 0,V=[],$=[]){let N=s.getTokenOffset(),x=s.getTokenOffset()+s.getTokenLength();if(N===x&&N>0){for(N--;N>0&&/\s/.test(i.charAt(N));)N--;x=N+1}if(a(T,O,N,x),I&&l(I,!1),V.length+$.length>0){let L=s.getToken();for(;L!==17;){if(V.indexOf(L)!==-1){f();break}else if($.indexOf(L)!==-1)break;L=f()}}return I}function u(){switch(s.getTokenError()){case 4:return c(k("Invalid unicode sequence in string."),_.InvalidUnicode),!0;case 5:return c(k("Invalid escape character in string."),_.InvalidEscapeCharacter),!0;case 3:return c(k("Unexpected end of number."),_.UnexpectedEndOfNumber),!0;case 1:return c(k("Unexpected end of comment."),_.UnexpectedEndOfComment),!0;case 2:return c(k("Unexpected end of string."),_.UnexpectedEndOfString),!0;case 6:return c(k("Invalid characters in string. Control characters must be escaped."),_.InvalidCharacter),!0}return!1}function l(T,O){return T.length=s.getTokenOffset()+s.getTokenLength()-T.offset,O&&f(),T}function h(T){if(s.getToken()!==3)return;const O=new or(T,s.getTokenOffset());f();let I=!1;for(;s.getToken()!==4&&s.getToken()!==17;){if(s.getToken()===5){I||c(k("Value expected"),_.ValueExpected);const $=s.getTokenOffset();if(f(),s.getToken()===4){I&&a(k("Trailing comma"),_.TrailingComma,$,$+1);continue}}else I&&c(k("Expected comma"),_.CommaExpected);const V=m(O);V?O.items.push(V):c(k("Value expected"),_.ValueExpected,void 0,[],[4,5]),I=!0}return s.getToken()!==4?c(k("Expected comma or closing bracket"),_.CommaOrCloseBacketExpected,O):l(O,!0)}const p=new Ue(void 0,0,0);function g(T,O){const I=new lr(T,s.getTokenOffset(),p);let V=v(I);if(!V)if(s.getToken()===16){c(k("Property keys must be doublequoted"),_.PropertyKeysMustBeDoublequoted);const N=new Ue(I,s.getTokenOffset(),s.getTokenLength());N.value=s.getTokenValue(),V=N,f()}else return;if(I.keyNode=V,V.value!=="//"){const N=O[V.value];N?(a(k("Duplicate object key"),_.DuplicateKey,I.keyNode.offset,I.keyNode.offset+I.keyNode.length,X.Warning),le(N)&&a(k("Duplicate object key"),_.DuplicateKey,N.keyNode.offset,N.keyNode.offset+N.keyNode.length,X.Warning),O[V.value]=!0):O[V.value]=I}if(s.getToken()===6)I.colonOffset=s.getTokenOffset(),f();else if(c(k("Colon expected"),_.ColonExpected),s.getToken()===10&&e.positionAt(V.offset+V.length).line<e.positionAt(s.getTokenOffset()).line)return I.length=V.length,I;const $=m(I);return $?(I.valueNode=$,I.length=$.offset+$.length-I.offset,I):c(k("Value expected"),_.ValueExpected,I,[],[2,5])}function d(T){if(s.getToken()!==1)return;const O=new cr(T,s.getTokenOffset()),I=Object.create(null);f();let V=!1;for(;s.getToken()!==2&&s.getToken()!==17;){if(s.getToken()===5){V||c(k("Property expected"),_.PropertyExpected);const N=s.getTokenOffset();if(f(),s.getToken()===2){V&&a(k("Trailing comma"),_.TrailingComma,N,N+1);continue}}else V&&c(k("Expected comma"),_.CommaExpected);const $=g(O,I);$?O.properties.push($):c(k("Property expected"),_.PropertyExpected,void 0,[],[2,5]),V=!0}return s.getToken()!==2?c(k("Expected comma or closing brace"),_.CommaOrCloseBraceExpected,O):l(O,!0)}function v(T){if(s.getToken()!==10)return;const O=new Ue(T,s.getTokenOffset());return O.value=s.getTokenValue(),l(O,!0)}function A(T){if(s.getToken()!==11)return;const O=new ar(T,s.getTokenOffset());if(s.getTokenError()===0){const I=s.getTokenValue();try{const V=JSON.parse(I);if(!W(V))return c(k("Invalid number format."),_.Undefined,O);O.value=V}catch{return c(k("Invalid number format."),_.Undefined,O)}O.isInteger=I.indexOf(".")===-1}return l(O,!0)}function w(T){switch(s.getToken()){case 7:return l(new sr(T,s.getTokenOffset()),!0);case 8:return l(new dn(T,!0,s.getTokenOffset()),!0);case 9:return l(new dn(T,!1,s.getTokenOffset()),!0);default:return}}function m(T){return h(T)||d(T)||v(T)||A(T)||w(T)}let S;return f()!==17&&(S=m(S),S?s.getToken()!==17&&c(k("End of file expected."),_.Undefined):c(k("Expected a JSON object, array or literal."),_.Undefined)),new In(S,n,o)}function ot(e,t,n){if(e!==null&&typeof e=="object"){const r=t+"	";if(Array.isArray(e)){if(e.length===0)return"[]";let i=`[
`;for(let s=0;s<e.length;s++)i+=r+ot(e[s],r,n),s<e.length-1&&(i+=","),i+=`
`;return i+=t+"]",i}else{const i=Object.keys(e);if(i.length===0)return"{}";let s=`{
`;for(let o=0;o<i.length;o++){const f=i[o];s+=r+JSON.stringify(f)+": "+ot(e[f],r,n),o<i.length-1&&(s+=","),s+=`
`}return s+=t+"}",s}}return n(e)}var gr=class{constructor(e,t=[],n=Promise,r={}){this.schemaService=e,this.contributions=t,this.promiseConstructor=n,this.clientCapabilities=r}doResolve(e){for(let t=this.contributions.length-1;t>=0;t--){const n=this.contributions[t].resolveCompletion;if(n){const r=n(e);if(r)return r}}return this.promiseConstructor.resolve(e)}doComplete(e,t,n){const r={items:[],isIncomplete:!1},i=e.getText(),s=e.offsetAt(t);let o=n.getNodeFromOffset(s,!0);if(this.isInComment(e,o?o.offset:0,s))return Promise.resolve(r);if(o&&s===o.offset+o.length&&s>0){const l=i[s-1];(o.type==="object"&&l==="}"||o.type==="array"&&l==="]")&&(o=o.parent)}const f=this.getCurrentWord(e,s);let a;if(o&&(o.type==="string"||o.type==="number"||o.type==="boolean"||o.type==="null"))a=M.create(e.positionAt(o.offset),e.positionAt(o.offset+o.length));else{let l=s-f.length;l>0&&i[l-1]==='"'&&l--,a=M.create(e.positionAt(l),t)}const c=new Map,u={add:l=>{let h=l.label;const p=c.get(h);if(p)p.documentation||(p.documentation=l.documentation),p.detail||(p.detail=l.detail),p.labelDetails||(p.labelDetails=l.labelDetails);else{if(h=h.replace(/[\n]/g,""),h.length>60){const g=h.substr(0,57).trim()+"...";c.has(g)||(h=g)}l.textEdit=re.replace(a,l.insertText),l.label=h,c.set(h,l),r.items.push(l)}},setAsIncomplete:()=>{r.isIncomplete=!0},error:l=>{console.error(l)},getNumberOfProposals:()=>r.items.length};return this.schemaService.getSchemaForResource(e.uri,n).then(l=>{const h=[];let p=!0,g="",d;if(o&&o.type==="string"){const A=o.parent;A&&A.type==="property"&&A.keyNode===o&&(p=!A.valueNode,d=A,g=i.substr(o.offset+1,o.length-2),A&&(o=A.parent))}if(o&&o.type==="object"){if(o.offset===s)return r;o.properties.forEach(S=>{(!d||d!==S)&&c.set(S.keyNode.value,Ke.create("__"))});let w="";p&&(w=this.evaluateSeparatorAfter(e,e.offsetAt(a.end))),l?this.getPropertyCompletions(l,n,o,p,w,u):this.getSchemaLessPropertyCompletions(n,o,g,u);const m=st(o);this.contributions.forEach(S=>{const b=S.collectPropertyCompletions(e.uri,m,f,p,w==="",u);b&&h.push(b)}),!l&&f.length>0&&i.charAt(s-f.length-1)!=='"'&&(u.add({kind:G.Property,label:this.getLabelForValue(f),insertText:this.getInsertTextForProperty(f,void 0,!1,w),insertTextFormat:R.Snippet,documentation:""}),u.setAsIncomplete())}const v={};return l?this.getValueCompletions(l,n,o,s,e,u,v):this.getSchemaLessValueCompletions(n,o,s,e,u),this.contributions.length>0&&this.getContributedValueCompletions(n,o,s,e,u,h),this.promiseConstructor.all(h).then(()=>{if(u.getNumberOfProposals()===0){let A=s;o&&(o.type==="string"||o.type==="number"||o.type==="boolean"||o.type==="null")&&(A=o.offset+o.length);const w=this.evaluateSeparatorAfter(e,A);this.addFillerValueCompletions(v,w,u)}return r})})}getPropertyCompletions(e,t,n,r,i,s){t.getMatchingSchemas(e.schema,n.offset).forEach(f=>{if(f.node===n&&!f.inverted){const a=f.schema.properties;a&&Object.keys(a).forEach(u=>{const l=a[u];if(typeof l=="object"&&!l.deprecationMessage&&!l.doNotSuggest){const h={kind:G.Property,label:u,insertText:this.getInsertTextForProperty(u,l,r,i),insertTextFormat:R.Snippet,filterText:this.getFilterTextForValue(u),documentation:this.fromMarkup(l.markdownDescription)||l.description||""};l.suggestSortText!==void 0&&(h.sortText=l.suggestSortText),h.insertText&&we(h.insertText,`$1${i}`)&&(h.command={title:"Suggest",command:"editor.action.triggerSuggest"}),s.add(h)}});const c=f.schema.propertyNames;if(typeof c=="object"&&!c.deprecationMessage&&!c.doNotSuggest){const u=(l,h=void 0)=>{const p={kind:G.Property,label:l,insertText:this.getInsertTextForProperty(l,void 0,r,i),insertTextFormat:R.Snippet,filterText:this.getFilterTextForValue(l),documentation:h||this.fromMarkup(c.markdownDescription)||c.description||""};c.suggestSortText!==void 0&&(p.sortText=c.suggestSortText),p.insertText&&we(p.insertText,`$1${i}`)&&(p.command={title:"Suggest",command:"editor.action.triggerSuggest"}),s.add(p)};if(c.enum)for(let l=0;l<c.enum.length;l++){let h;c.markdownEnumDescriptions&&l<c.markdownEnumDescriptions.length?h=this.fromMarkup(c.markdownEnumDescriptions[l]):c.enumDescriptions&&l<c.enumDescriptions.length&&(h=c.enumDescriptions[l]),u(c.enum[l],h)}c.const&&u(c.const)}}})}getSchemaLessPropertyCompletions(e,t,n,r){const i=s=>{s.properties.forEach(o=>{const f=o.keyNode.value;r.add({kind:G.Property,label:f,insertText:this.getInsertTextForValue(f,""),insertTextFormat:R.Snippet,filterText:this.getFilterTextForValue(f),documentation:""})})};if(t.parent)if(t.parent.type==="property"){const s=t.parent.keyNode.value;e.visit(o=>(o.type==="property"&&o!==t.parent&&o.keyNode.value===s&&o.valueNode&&o.valueNode.type==="object"&&i(o.valueNode),!0))}else t.parent.type==="array"&&t.parent.items.forEach(s=>{s.type==="object"&&s!==t&&i(s)});else t.type==="object"&&r.add({kind:G.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",void 0,!0,""),insertTextFormat:R.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})}getSchemaLessValueCompletions(e,t,n,r,i){let s=n;if(t&&(t.type==="string"||t.type==="number"||t.type==="boolean"||t.type==="null")&&(s=t.offset+t.length,t=t.parent),!t){i.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:R.Snippet,documentation:""}),i.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:R.Snippet,documentation:""});return}const o=this.evaluateSeparatorAfter(r,s),f=a=>{a.parent&&!Ln(a.parent,n,!0)&&i.add({kind:this.getSuggestionKind(a.type),label:this.getLabelTextForMatchingNode(a,r),insertText:this.getInsertTextForMatchingNode(a,r,o),insertTextFormat:R.Snippet,documentation:""}),a.type==="boolean"&&this.addBooleanValueCompletion(!a.value,o,i)};if(t.type==="property"&&n>(t.colonOffset||0)){const a=t.valueNode;if(a&&(n>a.offset+a.length||a.type==="object"||a.type==="array"))return;const c=t.keyNode.value;e.visit(u=>(u.type==="property"&&u.keyNode.value===c&&u.valueNode&&f(u.valueNode),!0)),c==="$schema"&&t.parent&&!t.parent.parent&&this.addDollarSchemaCompletions(o,i)}if(t.type==="array")if(t.parent&&t.parent.type==="property"){const a=t.parent.keyNode.value;e.visit(c=>(c.type==="property"&&c.keyNode.value===a&&c.valueNode&&c.valueNode.type==="array"&&c.valueNode.items.forEach(f),!0))}else t.items.forEach(f)}getValueCompletions(e,t,n,r,i,s,o){let f=r,a,c;if(n&&(n.type==="string"||n.type==="number"||n.type==="boolean"||n.type==="null")&&(f=n.offset+n.length,c=n,n=n.parent),!n){this.addSchemaValueCompletions(e.schema,"",s,o);return}if(n.type==="property"&&r>(n.colonOffset||0)){const u=n.valueNode;if(u&&r>u.offset+u.length)return;a=n.keyNode.value,n=n.parent}if(n&&(a!==void 0||n.type==="array")){const u=this.evaluateSeparatorAfter(i,f),l=t.getMatchingSchemas(e.schema,n.offset,c);for(const h of l)if(h.node===n&&!h.inverted&&h.schema){if(n.type==="array"&&h.schema.items){let p=s;if(h.schema.uniqueItems){const g=new Set;n.children.forEach(d=>{d.type!=="array"&&d.type!=="object"&&g.add(this.getLabelForValue(fe(d)))}),p={...s,add(d){g.has(d.label)||s.add(d)}}}if(Array.isArray(h.schema.items)){const g=this.findItemAtOffset(n,i,r);g<h.schema.items.length&&this.addSchemaValueCompletions(h.schema.items[g],u,p,o)}else this.addSchemaValueCompletions(h.schema.items,u,p,o)}if(a!==void 0){let p=!1;if(h.schema.properties){const g=h.schema.properties[a];g&&(p=!0,this.addSchemaValueCompletions(g,u,s,o))}if(h.schema.patternProperties&&!p)for(const g of Object.keys(h.schema.patternProperties)){const d=Ee(g);if(d!=null&&d.test(a)){p=!0;const v=h.schema.patternProperties[g];this.addSchemaValueCompletions(v,u,s,o)}}if(h.schema.additionalProperties&&!p){const g=h.schema.additionalProperties;this.addSchemaValueCompletions(g,u,s,o)}}}a==="$schema"&&!n.parent&&this.addDollarSchemaCompletions(u,s),o.boolean&&(this.addBooleanValueCompletion(!0,u,s),this.addBooleanValueCompletion(!1,u,s)),o.null&&this.addNullValueCompletion(u,s)}}getContributedValueCompletions(e,t,n,r,i,s){if(!t)this.contributions.forEach(o=>{const f=o.collectDefaultCompletions(r.uri,i);f&&s.push(f)});else if((t.type==="string"||t.type==="number"||t.type==="boolean"||t.type==="null")&&(t=t.parent),t&&t.type==="property"&&n>(t.colonOffset||0)){const o=t.keyNode.value,f=t.valueNode;if((!f||n<=f.offset+f.length)&&t.parent){const a=st(t.parent);this.contributions.forEach(c=>{const u=c.collectValueCompletions(r.uri,a,o,i);u&&s.push(u)})}}}addSchemaValueCompletions(e,t,n,r){typeof e=="object"&&(this.addEnumValueCompletions(e,t,n),this.addDefaultValueCompletions(e,t,n),this.collectTypes(e,r),Array.isArray(e.allOf)&&e.allOf.forEach(i=>this.addSchemaValueCompletions(i,t,n,r)),Array.isArray(e.anyOf)&&e.anyOf.forEach(i=>this.addSchemaValueCompletions(i,t,n,r)),Array.isArray(e.oneOf)&&e.oneOf.forEach(i=>this.addSchemaValueCompletions(i,t,n,r)))}addDefaultValueCompletions(e,t,n,r=0){let i=!1;if(Y(e.default)){let s=e.type,o=e.default;for(let a=r;a>0;a--)o=[o],s="array";const f={kind:this.getSuggestionKind(s),label:this.getLabelForValue(o),insertText:this.getInsertTextForValue(o,t),insertTextFormat:R.Snippet};this.doesSupportsLabelDetails()?f.labelDetails={description:k("Default value")}:f.detail=k("Default value"),n.add(f),i=!0}Array.isArray(e.examples)&&e.examples.forEach(s=>{let o=e.type,f=s;for(let a=r;a>0;a--)f=[f],o="array";n.add({kind:this.getSuggestionKind(o),label:this.getLabelForValue(f),insertText:this.getInsertTextForValue(f,t),insertTextFormat:R.Snippet}),i=!0}),Array.isArray(e.defaultSnippets)&&e.defaultSnippets.forEach(s=>{let o=e.type,f=s.body,a=s.label,c,u;if(Y(f)){e.type;for(let l=r;l>0;l--)f=[f];c=this.getInsertTextForSnippetValue(f,t),u=this.getFilterTextForSnippetValue(f),a=a||this.getLabelForSnippetValue(f)}else if(typeof s.bodyText=="string"){let l="",h="",p="";for(let g=r;g>0;g--)l=l+p+`[
`,h=h+`
`+p+"]",p+="	",o="array";c=l+p+s.bodyText.split(`
`).join(`
`+p)+h+t,a=a||c,u=c.replace(/[\n]/g,"")}else return;n.add({kind:this.getSuggestionKind(o),label:a,documentation:this.fromMarkup(s.markdownDescription)||s.description,insertText:c,insertTextFormat:R.Snippet,filterText:u}),i=!0}),!i&&typeof e.items=="object"&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,t,n,r+1)}addEnumValueCompletions(e,t,n){if(Y(e.const)&&n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t),insertTextFormat:R.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(let r=0,i=e.enum.length;r<i;r++){const s=e.enum[r];let o=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&r<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?o=this.fromMarkup(e.markdownEnumDescriptions[r]):e.enumDescriptions&&r<e.enumDescriptions.length&&(o=e.enumDescriptions[r]),n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(s),insertText:this.getInsertTextForValue(s,t),insertTextFormat:R.Snippet,documentation:o})}}collectTypes(e,t){if(Array.isArray(e.enum)||Y(e.const))return;const n=e.type;Array.isArray(n)?n.forEach(r=>t[r]=!0):n&&(t[n]=!0)}addFillerValueCompletions(e,t,n){e.object&&n.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},t),insertTextFormat:R.Snippet,detail:k("New object"),documentation:""}),e.array&&n.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],t),insertTextFormat:R.Snippet,detail:k("New array"),documentation:""})}addBooleanValueCompletion(e,t,n){n.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t),insertTextFormat:R.Snippet,documentation:""})}addNullValueCompletion(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:R.Snippet,documentation:""})}addDollarSchemaCompletions(e,t){this.schemaService.getRegisteredSchemaIds(r=>r==="http"||r==="https").forEach(r=>{r.startsWith("http://json-schema.org/draft-")&&(r=r+"#"),t.add({kind:G.Module,label:this.getLabelForValue(r),filterText:this.getFilterTextForValue(r),insertText:this.getInsertTextForValue(r,e),insertTextFormat:R.Snippet,documentation:""})})}getLabelForValue(e){return JSON.stringify(e)}getValueFromLabel(e){return JSON.parse(e)}getFilterTextForValue(e){return JSON.stringify(e)}getFilterTextForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getLabelForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getInsertTextForPlainText(e){return e.replace(/[\\\$\}]/g,"\\$&")}getInsertTextForValue(e,t){const n=JSON.stringify(e,null,"	");return n==="{}"?"{$1}"+t:n==="[]"?"[$1]"+t:this.getInsertTextForPlainText(n+t)}getInsertTextForSnippetValue(e,t){return ot(e,"",r=>typeof r=="string"&&r[0]==="^"?r.substr(1):JSON.stringify(r))+t}getInsertTextForGuessedValue(e,t){switch(typeof e){case"object":return e===null?"${1:null}"+t:this.getInsertTextForValue(e,t);case"string":let n=JSON.stringify(e);return n=n.substr(1,n.length-2),n=this.getInsertTextForPlainText(n),'"${1:'+n+'}"'+t;case"number":case"boolean":return"${1:"+JSON.stringify(e)+"}"+t}return this.getInsertTextForValue(e,t)}getSuggestionKind(e){if(Array.isArray(e)){const t=e;e=t.length>0?t[0]:void 0}if(!e)return G.Value;switch(e){case"string":return G.Value;case"object":return G.Module;case"property":return G.Property;default:return G.Value}}getLabelTextForMatchingNode(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:return t.getText().substr(e.offset,e.length)}}getInsertTextForMatchingNode(e,t,n){switch(e.type){case"array":return this.getInsertTextForValue([],n);case"object":return this.getInsertTextForValue({},n);default:const r=t.getText().substr(e.offset,e.length)+n;return this.getInsertTextForPlainText(r)}}getInsertTextForProperty(e,t,n,r){const i=this.getInsertTextForValue(e,"");if(!n)return i;const s=i+": ";let o,f=0;if(t){if(Array.isArray(t.defaultSnippets)){if(t.defaultSnippets.length===1){const a=t.defaultSnippets[0].body;Y(a)&&(o=this.getInsertTextForSnippetValue(a,""))}f+=t.defaultSnippets.length}if(t.enum&&(!o&&t.enum.length===1&&(o=this.getInsertTextForGuessedValue(t.enum[0],"")),f+=t.enum.length),Y(t.const)&&(o||(o=this.getInsertTextForGuessedValue(t.const,"")),f++),Y(t.default)&&(o||(o=this.getInsertTextForGuessedValue(t.default,"")),f++),Array.isArray(t.examples)&&t.examples.length&&(o||(o=this.getInsertTextForGuessedValue(t.examples[0],"")),f+=t.examples.length),f===0){let a=Array.isArray(t.type)?t.type[0]:t.type;switch(a||(t.properties?a="object":t.items&&(a="array")),a){case"boolean":o="$1";break;case"string":o='"$1"';break;case"object":o="{$1}";break;case"array":o="[$1]";break;case"number":case"integer":o="${1:0}";break;case"null":o="${1:null}";break;default:return i}}}return(!o||f>1)&&(o="$1"),s+o+r}getCurrentWord(e,t){let n=t-1;const r=e.getText();for(;n>=0&&` 	
\r\v":{[,]}`.indexOf(r.charAt(n))===-1;)n--;return r.substring(n+1,t)}evaluateSeparatorAfter(e,t){const n=ce(e.getText(),!0);switch(n.setPosition(t),n.scan()){case 5:case 2:case 4:case 17:return"";default:return","}}findItemAtOffset(e,t,n){const r=ce(t.getText(),!0),i=e.items;for(let s=i.length-1;s>=0;s--){const o=i[s];if(n>o.offset+o.length)return r.setPosition(o.offset+o.length),r.scan()===5&&n>=r.getTokenOffset()+r.getTokenLength()?s+1:s;if(n>=o.offset)return s}return 0}isInComment(e,t,n){const r=ce(e.getText(),!1);r.setPosition(t);let i=r.scan();for(;i!==17&&r.getTokenOffset()+r.getTokenLength()<n;)i=r.scan();return(i===12||i===13)&&r.getTokenOffset()<=n}fromMarkup(e){if(e&&this.doesSupportMarkdown())return{kind:ue.Markdown,value:e}}doesSupportMarkdown(){var e,t,n;if(!Y(this.supportsMarkdown)){const r=(n=(t=(e=this.clientCapabilities.textDocument)==null?void 0:e.completion)==null?void 0:t.completionItem)==null?void 0:n.documentationFormat;this.supportsMarkdown=Array.isArray(r)&&r.indexOf(ue.Markdown)!==-1}return this.supportsMarkdown}doesSupportsCommitCharacters(){var e,t,n;return Y(this.supportsCommitCharacters)||(this.labelDetailsSupport=(n=(t=(e=this.clientCapabilities.textDocument)==null?void 0:e.completion)==null?void 0:t.completionItem)==null?void 0:n.commitCharactersSupport),this.supportsCommitCharacters}doesSupportsLabelDetails(){var e,t,n;return Y(this.labelDetailsSupport)||(this.labelDetailsSupport=(n=(t=(e=this.clientCapabilities.textDocument)==null?void 0:e.completion)==null?void 0:t.completionItem)==null?void 0:n.labelDetailsSupport),this.labelDetailsSupport}},dr=class{constructor(e,t=[],n){this.schemaService=e,this.contributions=t,this.promise=n||Promise}doHover(e,t,n){const r=e.offsetAt(t);let i=n.getNodeFromOffset(r);if(!i||(i.type==="object"||i.type==="array")&&r>i.offset+1&&r<i.offset+i.length-1)return this.promise.resolve(null);const s=i;if(i.type==="string"){const c=i.parent;if(c&&c.type==="property"&&c.keyNode===i&&(i=c.valueNode,!i))return this.promise.resolve(null)}const o=M.create(e.positionAt(s.offset),e.positionAt(s.offset+s.length)),f=c=>({contents:c,range:o}),a=st(i);for(let c=this.contributions.length-1;c>=0;c--){const l=this.contributions[c].getInfoContribution(e.uri,a);if(l)return l.then(h=>f(h))}return this.schemaService.getSchemaForResource(e.uri,n).then(c=>{if(c&&i){const u=n.getMatchingSchemas(c.schema,i.offset);let l,h,p,g;u.every(v=>{if(v.node===i&&!v.inverted&&v.schema&&(l=l||v.schema.title,h=h||v.schema.markdownDescription||Re(v.schema.description),v.schema.enum)){const A=v.schema.enum.indexOf(fe(i));v.schema.markdownEnumDescriptions?p=v.schema.markdownEnumDescriptions[A]:v.schema.enumDescriptions&&(p=Re(v.schema.enumDescriptions[A])),p&&(g=v.schema.enum[A],typeof g!="string"&&(g=JSON.stringify(g)))}return!0});let d="";return l&&(d=Re(l)),h&&(d.length>0&&(d+=`

`),d+=h),p&&(d.length>0&&(d+=`

`),d+=`\`${mr(g)}\`: ${p}`),f([d])}return null})}};function Re(e){if(e)return e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,`$1

$3`).replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function mr(e){return e.indexOf("`")!==-1?"`` "+e+" ``":e}var yr=class{constructor(e,t){this.jsonSchemaService=e,this.promise=t,this.validationEnabled=!0}configure(e){e&&(this.validationEnabled=e.validate!==!1,this.commentSeverity=e.allowComments?void 0:X.Error)}doValidation(e,t,n,r){if(!this.validationEnabled)return this.promise.resolve([]);const i=[],s={},o=a=>{const c=a.range.start.line+" "+a.range.start.character+" "+a.message;s[c]||(s[c]=!0,i.push(a))},f=a=>{let c=n!=null&&n.trailingCommas?Ie(n.trailingCommas):X.Error,u=n!=null&&n.comments?Ie(n.comments):this.commentSeverity,l=n!=null&&n.schemaValidation?Ie(n.schemaValidation):X.Warning,h=n!=null&&n.schemaRequest?Ie(n.schemaRequest):X.Warning;if(a){const p=(g,d)=>{if(t.root&&h){const v=t.root,A=v.type==="object"?v.properties[0]:void 0;if(A&&A.keyNode.value==="$schema"){const w=A.valueNode||A,m=M.create(e.positionAt(w.offset),e.positionAt(w.offset+w.length));o(ie.create(m,g,h,d))}else{const w=M.create(e.positionAt(v.offset),e.positionAt(v.offset+1));o(ie.create(w,g,h,d))}}};if(a.errors.length)p(a.errors[0],_.SchemaResolveError);else if(l){for(const d of a.warnings)p(d,_.SchemaUnsupportedFeature);const g=t.validate(e,a.schema,l,n==null?void 0:n.schemaDraft);g&&g.forEach(o)}Pn(a.schema)&&(u=void 0),Vn(a.schema)&&(c=void 0)}for(const p of t.syntaxErrors){if(p.code===_.TrailingComma){if(typeof c!="number")continue;p.severity=c}o(p)}if(typeof u=="number"){const p=k("Comments are not permitted in JSON.");t.comments.forEach(g=>{o(ie.create(g,p,u,_.CommentNotPermitted))})}return i};if(r){const a=r.id||"schemaservice://untitled/"+vr++;return this.jsonSchemaService.registerExternalSchema({uri:a,schema:r}).getResolvedSchema().then(u=>f(u))}return this.jsonSchemaService.getSchemaForResource(e.uri,t).then(a=>f(a))}getLanguageStatus(e,t){return{schemas:this.jsonSchemaService.getSchemaURIsForResource(e.uri,t)}}},vr=0;function Pn(e){if(e&&typeof e=="object"){if(ne(e.allowComments))return e.allowComments;if(e.allOf)for(const t of e.allOf){const n=Pn(t);if(ne(n))return n}}}function Vn(e){if(e&&typeof e=="object"){if(ne(e.allowTrailingCommas))return e.allowTrailingCommas;const t=e;if(ne(t.allowsTrailingCommas))return t.allowsTrailingCommas;if(e.allOf)for(const n of e.allOf){const r=Vn(n);if(ne(r))return r}}}function Ie(e){switch(e){case"error":return X.Error;case"warning":return X.Warning;case"ignore":return}}var bn=48,br=57,kr=65,Pe=97,Ar=102;function U(e){return e<bn?0:e<=br?e-bn:(e<Pe&&(e+=Pe-kr),e>=Pe&&e<=Ar?e-Pe+10:0)}function Sr(e){if(e[0]==="#")switch(e.length){case 4:return{red:U(e.charCodeAt(1))*17/255,green:U(e.charCodeAt(2))*17/255,blue:U(e.charCodeAt(3))*17/255,alpha:1};case 5:return{red:U(e.charCodeAt(1))*17/255,green:U(e.charCodeAt(2))*17/255,blue:U(e.charCodeAt(3))*17/255,alpha:U(e.charCodeAt(4))*17/255};case 7:return{red:(U(e.charCodeAt(1))*16+U(e.charCodeAt(2)))/255,green:(U(e.charCodeAt(3))*16+U(e.charCodeAt(4)))/255,blue:(U(e.charCodeAt(5))*16+U(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(U(e.charCodeAt(1))*16+U(e.charCodeAt(2)))/255,green:(U(e.charCodeAt(3))*16+U(e.charCodeAt(4)))/255,blue:(U(e.charCodeAt(5))*16+U(e.charCodeAt(6)))/255,alpha:(U(e.charCodeAt(7))*16+U(e.charCodeAt(8)))/255}}}var Tr=class{constructor(e){this.schemaService=e}findDocumentSymbols(e,t,n={resultLimit:Number.MAX_VALUE}){const r=t.root;if(!r)return[];let i=n.resultLimit||Number.MAX_VALUE;const s=e.uri;if((s==="vscode://defaultsettings/keybindings.json"||we(s.toLowerCase(),"/user/keybindings.json"))&&r.type==="array"){const l=[];for(const h of r.items)if(h.type==="object"){for(const p of h.properties)if(p.keyNode.value==="key"&&p.valueNode){const g=ye.create(e.uri,oe(e,h));if(l.push({name:kn(p.valueNode),kind:te.Function,location:g}),i--,i<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),l}}return l}const o=[{node:r,containerName:""}];let f=0,a=!1;const c=[],u=(l,h)=>{l.type==="array"?l.items.forEach(p=>{p&&o.push({node:p,containerName:h})}):l.type==="object"&&l.properties.forEach(p=>{const g=p.valueNode;if(g)if(i>0){i--;const d=ye.create(e.uri,oe(e,p)),v=h?h+"."+p.keyNode.value:p.keyNode.value;c.push({name:this.getKeyLabel(p),kind:this.getSymbolKind(g.type),location:d,containerName:h}),o.push({node:g,containerName:v})}else a=!0})};for(;f<o.length;){const l=o[f++];u(l.node,l.containerName)}return a&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),c}findDocumentSymbols2(e,t,n={resultLimit:Number.MAX_VALUE}){const r=t.root;if(!r)return[];let i=n.resultLimit||Number.MAX_VALUE;const s=e.uri;if((s==="vscode://defaultsettings/keybindings.json"||we(s.toLowerCase(),"/user/keybindings.json"))&&r.type==="array"){const l=[];for(const h of r.items)if(h.type==="object"){for(const p of h.properties)if(p.keyNode.value==="key"&&p.valueNode){const g=oe(e,h),d=oe(e,p.keyNode);if(l.push({name:kn(p.valueNode),kind:te.Function,range:g,selectionRange:d}),i--,i<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),l}}return l}const o=[],f=[{node:r,result:o}];let a=0,c=!1;const u=(l,h)=>{l.type==="array"?l.items.forEach((p,g)=>{if(p)if(i>0){i--;const d=oe(e,p),v=d,w={name:String(g),kind:this.getSymbolKind(p.type),range:d,selectionRange:v,children:[]};h.push(w),f.push({result:w.children,node:p})}else c=!0}):l.type==="object"&&l.properties.forEach(p=>{const g=p.valueNode;if(g)if(i>0){i--;const d=oe(e,p),v=oe(e,p.keyNode),A=[],w={name:this.getKeyLabel(p),kind:this.getSymbolKind(g.type),range:d,selectionRange:v,children:A,detail:this.getDetail(g)};h.push(w),f.push({result:A,node:g})}else c=!0})};for(;a<f.length;){const l=f[a++];u(l.node,l.result)}return c&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),o}getSymbolKind(e){switch(e){case"object":return te.Module;case"string":return te.String;case"number":return te.Number;case"array":return te.Array;case"boolean":return te.Boolean;default:return te.Variable}}getKeyLabel(e){let t=e.keyNode.value;return t&&(t=t.replace(/[\n]/g,"")),t&&t.trim()?t:`"${t}"`}getDetail(e){if(e){if(e.type==="boolean"||e.type==="number"||e.type==="null"||e.type==="string")return String(e.value);if(e.type==="array")return e.children.length?void 0:"[]";if(e.type==="object")return e.children.length?void 0:"{}"}}findDocumentColors(e,t,n){return this.schemaService.getSchemaForResource(e.uri,t).then(r=>{const i=[];if(r){let s=n&&typeof n.resultLimit=="number"?n.resultLimit:Number.MAX_VALUE;const o=t.getMatchingSchemas(r.schema),f={};for(const a of o)if(!a.inverted&&a.schema&&(a.schema.format==="color"||a.schema.format==="color-hex")&&a.node&&a.node.type==="string"){const c=String(a.node.offset);if(!f[c]){const u=Sr(fe(a.node));if(u){const l=oe(e,a.node);i.push({color:u,range:l})}if(f[c]=!0,s--,s<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(e.uri),i}}}return i})}getColorPresentations(e,t,n,r){const i=[],s=Math.round(n.red*255),o=Math.round(n.green*255),f=Math.round(n.blue*255);function a(u){const l=u.toString(16);return l.length!==2?"0"+l:l}let c;return n.alpha===1?c=`#${a(s)}${a(o)}${a(f)}`:c=`#${a(s)}${a(o)}${a(f)}${a(Math.round(n.alpha*255))}`,i.push({label:c,textEdit:re.replace(r,JSON.stringify(c))}),i}};function oe(e,t){return M.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}function kn(e){return fe(e)||k("<empty>")}var at={schemaAssociations:[],schemas:{"http://json-schema.org/draft-04/schema#":{$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"http://json-schema.org/draft-07/schema#":{definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},xr={id:k("A unique identifier for the schema."),$schema:k("The schema to verify this document against."),title:k("A descriptive title of the element."),description:k("A long description of the element. Used in hover menus and suggestions."),default:k("A default value. Used by suggestions."),multipleOf:k("A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:k("The maximum numerical value, inclusive by default."),exclusiveMaximum:k("Makes the maximum property exclusive."),minimum:k("The minimum numerical value, inclusive by default."),exclusiveMinimum:k("Makes the minimum property exclusive."),maxLength:k("The maximum length of a string."),minLength:k("The minimum length of a string."),pattern:k("A regular expression to match the string against. It is not implicitly anchored."),additionalItems:k("For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail."),items:k("For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:k("The maximum number of items that can be inside an array. Inclusive."),minItems:k("The minimum number of items that can be inside an array. Inclusive."),uniqueItems:k("If all of the items in the array must be unique. Defaults to false."),maxProperties:k("The maximum number of properties an object can have. Inclusive."),minProperties:k("The minimum number of properties an object can have. Inclusive."),required:k("An array of strings that lists the names of all properties required on this object."),additionalProperties:k("Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail."),definitions:k("Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:k("A map of property names to schemas for each property."),patternProperties:k("A map of regular expressions on property names to schemas for matching properties."),dependencies:k("A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:k("The set of literal values that are valid."),type:k("Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:k("Describes the format expected for the value."),allOf:k("An array of schemas, all of which must match."),anyOf:k("An array of schemas, where at least one must match."),oneOf:k("An array of schemas, exactly one of which must match."),not:k("A schema which must not match."),$id:k("A unique identifier for the schema."),$ref:k("Reference a definition hosted on any location."),$comment:k("Comments from schema authors to readers or maintainers of the schema."),readOnly:k("Indicates that the value of the instance is managed exclusively by the owning authority."),examples:k("Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:k('An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:k("If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:k("An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:k("Describes the media type of a string property."),contentEncoding:k("Describes the content encoding of a string property."),if:k('The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:k('The "if" subschema is used for validation when the "if" subschema succeeds.'),else:k('The "else" subschema is used for validation when the "if" subschema fails.')};for(const e in at.schemas){const t=at.schemas[e];for(const n in t.properties){let r=t.properties[n];typeof r=="boolean"&&(r=t.properties[n]={});const i=xr[n];i&&(r.description=i)}}var Mn;(()=>{var e={470:i=>{function s(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var u,l="",h=0,p=-1,g=0,d=0;d<=a.length;++d){if(d<a.length)u=a.charCodeAt(d);else{if(u===47)break;u=47}if(u===47){if(!(p===d-1||g===1))if(p!==d-1&&g===2){if(l.length<2||h!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var v=l.lastIndexOf("/");if(v!==l.length-1){v===-1?(l="",h=0):h=(l=l.slice(0,v)).length-1-l.lastIndexOf("/"),p=d,g=0;continue}}else if(l.length===2||l.length===1){l="",h=0,p=d,g=0;continue}}c&&(l.length>0?l+="/..":l="..",h=2)}else l.length>0?l+="/"+a.slice(p+1,d):l=a.slice(p+1,d),h=d-p-1;p=d,g=0}else u===46&&g!==-1?++g:g=-1}return l}var f={resolve:function(){for(var a,c="",u=!1,l=arguments.length-1;l>=-1&&!u;l--){var h;l>=0?h=arguments[l]:(a===void 0&&(a=process.cwd()),h=a),s(h),h.length!==0&&(c=h+"/"+c,u=h.charCodeAt(0)===47)}return c=o(c,!u),u?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(s(a),a.length===0)return".";var c=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&u&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return s(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var u=arguments[c];s(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":f.normalize(a)},relative:function(a,c){if(s(a),s(c),a===c||(a=f.resolve(a))===(c=f.resolve(c)))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var l=a.length,h=l-u,p=1;p<c.length&&c.charCodeAt(p)===47;++p);for(var g=c.length-p,d=h<g?h:g,v=-1,A=0;A<=d;++A){if(A===d){if(g>d){if(c.charCodeAt(p+A)===47)return c.slice(p+A+1);if(A===0)return c.slice(p+A)}else h>d&&(a.charCodeAt(u+A)===47?v=A:A===0&&(v=0));break}var w=a.charCodeAt(u+A);if(w!==c.charCodeAt(p+A))break;w===47&&(v=A)}var m="";for(A=u+v+1;A<=l;++A)A!==l&&a.charCodeAt(A)!==47||(m.length===0?m+="..":m+="/..");return m.length>0?m+c.slice(p+v):(p+=v,c.charCodeAt(p)===47&&++p,c.slice(p))},_makeLong:function(a){return a},dirname:function(a){if(s(a),a.length===0)return".";for(var c=a.charCodeAt(0),u=c===47,l=-1,h=!0,p=a.length-1;p>=1;--p)if((c=a.charCodeAt(p))===47){if(!h){l=p;break}}else h=!1;return l===-1?u?"/":".":u&&l===1?"//":a.slice(0,l)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');s(a);var u,l=0,h=-1,p=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var g=c.length-1,d=-1;for(u=a.length-1;u>=0;--u){var v=a.charCodeAt(u);if(v===47){if(!p){l=u+1;break}}else d===-1&&(p=!1,d=u+1),g>=0&&(v===c.charCodeAt(g)?--g==-1&&(h=u):(g=-1,h=d))}return l===h?h=d:h===-1&&(h=a.length),a.slice(l,h)}for(u=a.length-1;u>=0;--u)if(a.charCodeAt(u)===47){if(!p){l=u+1;break}}else h===-1&&(p=!1,h=u+1);return h===-1?"":a.slice(l,h)},extname:function(a){s(a);for(var c=-1,u=0,l=-1,h=!0,p=0,g=a.length-1;g>=0;--g){var d=a.charCodeAt(g);if(d!==47)l===-1&&(h=!1,l=g+1),d===46?c===-1?c=g:p!==1&&(p=1):c!==-1&&(p=-1);else if(!h){u=g+1;break}}return c===-1||l===-1||p===0||p===1&&c===l-1&&c===u+1?"":a.slice(c,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,u){var l=u.dir||u.root,h=u.base||(u.name||"")+(u.ext||"");return l?l===u.root?l+h:l+"/"+h:h}(0,a)},parse:function(a){s(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var u,l=a.charCodeAt(0),h=l===47;h?(c.root="/",u=1):u=0;for(var p=-1,g=0,d=-1,v=!0,A=a.length-1,w=0;A>=u;--A)if((l=a.charCodeAt(A))!==47)d===-1&&(v=!1,d=A+1),l===46?p===-1?p=A:w!==1&&(w=1):p!==-1&&(w=-1);else if(!v){g=A+1;break}return p===-1||d===-1||w===0||w===1&&p===d-1&&p===g+1?d!==-1&&(c.base=c.name=g===0&&h?a.slice(1,d):a.slice(g,d)):(g===0&&h?(c.name=a.slice(1,p),c.base=a.slice(1,d)):(c.name=a.slice(g,p),c.base=a.slice(g,d)),c.ext=a.slice(p,d)),g>0?c.dir=a.slice(0,g-1):h&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};f.posix=f,i.exports=f}},t={};function n(i){var s=t[i];if(s!==void 0)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(i,s)=>{for(var o in s)n.o(s,o)&&!n.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:s[o]})},n.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{let i;n.r(r),n.d(r,{URI:()=>h,Utils:()=>$}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const s=/^\w[\w\d+.-]*$/,o=/^\//,f=/^\/\//;function a(N,x){if(!N.scheme&&x)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${N.authority}", path: "${N.path}", query: "${N.query}", fragment: "${N.fragment}"}`);if(N.scheme&&!s.test(N.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(N.path){if(N.authority){if(!o.test(N.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(f.test(N.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const c="",u="/",l=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{constructor(x,L,P,F,j,E=!1){se(this,"scheme");se(this,"authority");se(this,"path");se(this,"query");se(this,"fragment");typeof x=="object"?(this.scheme=x.scheme||c,this.authority=x.authority||c,this.path=x.path||c,this.query=x.query||c,this.fragment=x.fragment||c):(this.scheme=function(ee,Z){return ee||Z?ee:"file"}(x,E),this.authority=L||c,this.path=function(ee,Z){switch(ee){case"https":case"http":case"file":Z?Z[0]!==u&&(Z=u+Z):Z=u}return Z}(this.scheme,P||c),this.query=F||c,this.fragment=j||c,a(this,E))}static isUri(x){return x instanceof h||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="string"&&typeof x.with=="function"&&typeof x.toString=="function"}get fsPath(){return w(this)}with(x){if(!x)return this;let{scheme:L,authority:P,path:F,query:j,fragment:E}=x;return L===void 0?L=this.scheme:L===null&&(L=c),P===void 0?P=this.authority:P===null&&(P=c),F===void 0?F=this.path:F===null&&(F=c),j===void 0?j=this.query:j===null&&(j=c),E===void 0?E=this.fragment:E===null&&(E=c),L===this.scheme&&P===this.authority&&F===this.path&&j===this.query&&E===this.fragment?this:new g(L,P,F,j,E)}static parse(x,L=!1){const P=l.exec(x);return P?new g(P[2]||c,T(P[4]||c),T(P[5]||c),T(P[7]||c),T(P[9]||c),L):new g(c,c,c,c,c)}static file(x){let L=c;if(i&&(x=x.replace(/\\/g,u)),x[0]===u&&x[1]===u){const P=x.indexOf(u,2);P===-1?(L=x.substring(2),x=u):(L=x.substring(2,P),x=x.substring(P)||u)}return new g("file",L,x,c,c)}static from(x){const L=new g(x.scheme,x.authority,x.path,x.query,x.fragment);return a(L,!0),L}toString(x=!1){return m(this,x)}toJSON(){return this}static revive(x){if(x){if(x instanceof h)return x;{const L=new g(x);return L._formatted=x.external,L._fsPath=x._sep===p?x.fsPath:null,L}}return x}}const p=i?1:void 0;class g extends h{constructor(){super(...arguments);se(this,"_formatted",null);se(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=w(this)),this._fsPath}toString(L=!1){return L?m(this,!0):(this._formatted||(this._formatted=m(this,!1)),this._formatted)}toJSON(){const L={$mid:1};return this._fsPath&&(L.fsPath=this._fsPath,L._sep=p),this._formatted&&(L.external=this._formatted),this.path&&(L.path=this.path),this.scheme&&(L.scheme=this.scheme),this.authority&&(L.authority=this.authority),this.query&&(L.query=this.query),this.fragment&&(L.fragment=this.fragment),L}}const d={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(N,x,L){let P,F=-1;for(let j=0;j<N.length;j++){const E=N.charCodeAt(j);if(E>=97&&E<=122||E>=65&&E<=90||E>=48&&E<=57||E===45||E===46||E===95||E===126||x&&E===47||L&&E===91||L&&E===93||L&&E===58)F!==-1&&(P+=encodeURIComponent(N.substring(F,j)),F=-1),P!==void 0&&(P+=N.charAt(j));else{P===void 0&&(P=N.substr(0,j));const ee=d[E];ee!==void 0?(F!==-1&&(P+=encodeURIComponent(N.substring(F,j)),F=-1),P+=ee):F===-1&&(F=j)}}return F!==-1&&(P+=encodeURIComponent(N.substring(F))),P!==void 0?P:N}function A(N){let x;for(let L=0;L<N.length;L++){const P=N.charCodeAt(L);P===35||P===63?(x===void 0&&(x=N.substr(0,L)),x+=d[P]):x!==void 0&&(x+=N[L])}return x!==void 0?x:N}function w(N,x){let L;return L=N.authority&&N.path.length>1&&N.scheme==="file"?`//${N.authority}${N.path}`:N.path.charCodeAt(0)===47&&(N.path.charCodeAt(1)>=65&&N.path.charCodeAt(1)<=90||N.path.charCodeAt(1)>=97&&N.path.charCodeAt(1)<=122)&&N.path.charCodeAt(2)===58?N.path[1].toLowerCase()+N.path.substr(2):N.path,i&&(L=L.replace(/\//g,"\\")),L}function m(N,x){const L=x?A:v;let P="",{scheme:F,authority:j,path:E,query:ee,fragment:Z}=N;if(F&&(P+=F,P+=":"),(j||F==="file")&&(P+=u,P+=u),j){let q=j.indexOf("@");if(q!==-1){const Le=j.substr(0,q);j=j.substr(q+1),q=Le.lastIndexOf(":"),q===-1?P+=L(Le,!1,!1):(P+=L(Le.substr(0,q),!1,!1),P+=":",P+=L(Le.substr(q+1),!1,!0)),P+="@"}j=j.toLowerCase(),q=j.lastIndexOf(":"),q===-1?P+=L(j,!1,!0):(P+=L(j.substr(0,q),!1,!0),P+=j.substr(q))}if(E){if(E.length>=3&&E.charCodeAt(0)===47&&E.charCodeAt(2)===58){const q=E.charCodeAt(1);q>=65&&q<=90&&(E=`/${String.fromCharCode(q+32)}:${E.substr(3)}`)}else if(E.length>=2&&E.charCodeAt(1)===58){const q=E.charCodeAt(0);q>=65&&q<=90&&(E=`${String.fromCharCode(q+32)}:${E.substr(2)}`)}P+=L(E,!0,!1)}return ee&&(P+="?",P+=L(ee,!1,!1)),Z&&(P+="#",P+=x?Z:v(Z,!1,!1)),P}function S(N){try{return decodeURIComponent(N)}catch{return N.length>3?N.substr(0,3)+S(N.substr(3)):N}}const b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function T(N){return N.match(b)?N.replace(b,x=>S(x)):N}var O=n(470);const I=O.posix||O,V="/";var $;(function(N){N.joinPath=function(x,...L){return x.with({path:I.join(x.path,...L)})},N.resolvePath=function(x,...L){let P=x.path,F=!1;P[0]!==V&&(P=V+P,F=!0);let j=I.resolve(P,...L);return F&&j[0]===V&&!x.authority&&(j=j.substring(1)),x.with({path:j})},N.dirname=function(x){if(x.path.length===0||x.path===V)return x;let L=I.dirname(x.path);return L.length===1&&L.charCodeAt(0)===46&&(L=""),x.with({path:L})},N.basename=function(x){return I.basename(x.path)},N.extname=function(x){return I.extname(x.path)}})($||($={}))})(),Mn=r})();var{URI:ke,Utils:Cr}=Mn;function wr(e,t){if(typeof e!="string")throw new TypeError("Expected a string");const n=String(e);let r="";const i=!!t,s=!!t;let o=!1;const f=t&&typeof t.flags=="string"?t.flags:"";let a;for(let c=0,u=n.length;c<u;c++)switch(a=n[c],a){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":r+="\\"+a;break;case"?":if(i){r+=".";break}case"[":case"]":if(i){r+=a;break}case"{":if(i){o=!0,r+="(";break}case"}":if(i){o=!1,r+=")";break}case",":if(o){r+="|";break}r+="\\"+a;break;case"*":const l=n[c-1];let h=1;for(;n[c+1]==="*";)h++,c++;const p=n[c+1];s?h>1&&(l==="/"||l===void 0||l==="{"||l===",")&&(p==="/"||p===void 0||p===","||p==="}")?(p==="/"?c++:l==="/"&&r.endsWith("\\/")&&(r=r.substr(0,r.length-2)),r+="((?:[^/]*(?:/|$))*)"):r+="([^/]*)":r+=".*";break;default:r+=a}return(!f||!~f.indexOf("g"))&&(r="^"+r+"$"),new RegExp(r,f)}var Nr="!",Or="/",Lr=class{constructor(e,t,n){this.folderUri=t,this.uris=n,this.globWrappers=[];try{for(let r of e){const i=r[0]!==Nr;i||(r=r.substring(1)),r.length>0&&(r[0]===Or&&(r=r.substring(1)),this.globWrappers.push({regexp:wr("**/"+r,{extended:!0,globstar:!0}),include:i}))}t&&(t=En(t),t.endsWith("/")||(t=t+"/"),this.folderUri=t)}catch{this.globWrappers.length=0,this.uris=[]}}matchesPattern(e){if(this.folderUri&&!e.startsWith(this.folderUri))return!1;let t=!1;for(const{regexp:n,include:r}of this.globWrappers)n.test(e)&&(t=r);return t}getURIs(){return this.uris}},Ir=class{constructor(e,t,n){this.service=e,this.uri=t,this.dependencies=new Set,this.anchors=void 0,n&&(this.unresolvedSchema=this.service.promise.resolve(new Te(n)))}getUnresolvedSchema(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.uri)),this.unresolvedSchema}getResolvedSchema(){return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(e=>this.service.resolveSchemaContent(e,this))),this.resolvedSchema}clearSchema(){const e=!!this.unresolvedSchema;return this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies.clear(),this.anchors=void 0,e}},Te=class{constructor(e,t=[]){this.schema=e,this.errors=t}},An=class{constructor(e,t=[],n=[],r){this.schema=e,this.errors=t,this.warnings=n,this.schemaDraft=r}getSection(e){const t=this.getSectionRecursive(e,this.schema);if(t)return H(t)}getSectionRecursive(e,t){if(!t||typeof t=="boolean"||e.length===0)return t;const n=e.shift();if(t.properties&&typeof t.properties[n])return this.getSectionRecursive(e,t.properties[n]);if(t.patternProperties)for(const r of Object.keys(t.patternProperties)){const i=Ee(r);if(i!=null&&i.test(n))return this.getSectionRecursive(e,t.patternProperties[r])}else{if(typeof t.additionalProperties=="object")return this.getSectionRecursive(e,t.additionalProperties);if(n.match("[0-9]+")){if(Array.isArray(t.items)){const r=parseInt(n,10);if(!isNaN(r)&&t.items[r])return this.getSectionRecursive(e,t.items[r])}else if(t.items)return this.getSectionRecursive(e,t.items)}}}},Pr=class{constructor(e,t,n){this.contextService=t,this.requestService=e,this.promiseConstructor=n||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}getRegisteredSchemaIds(e){return Object.keys(this.registeredSchemasIds).filter(t=>{const n=ke.parse(t).scheme;return n!=="schemaservice"&&(!e||e(n))})}get promise(){return this.promiseConstructor}dispose(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()}onResourceChange(e){this.cachedSchemaForResource=void 0;let t=!1;e=ae(e);const n=[e],r=Object.keys(this.schemasById).map(i=>this.schemasById[i]);for(;n.length;){const i=n.pop();for(let s=0;s<r.length;s++){const o=r[s];o&&(o.uri===i||o.dependencies.has(i))&&(o.uri!==i&&n.push(o.uri),o.clearSchema()&&(t=!0),r[s]=void 0)}}return t}setSchemaContributions(e){if(e.schemas){const t=e.schemas;for(const n in t){const r=ae(n);this.contributionSchemas[r]=this.addSchemaHandle(r,t[n])}}if(Array.isArray(e.schemaAssociations)){const t=e.schemaAssociations;for(let n of t){const r=n.uris.map(ae),i=this.addFilePatternAssociation(n.pattern,n.folderUri,r);this.contributionAssociations.push(i)}}}addSchemaHandle(e,t){const n=new Ir(this,e,t);return this.schemasById[e]=n,n}getOrAddSchemaHandle(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)}addFilePatternAssociation(e,t,n){const r=new Lr(e,t,n);return this.filePatternAssociations.push(r),r}registerExternalSchema(e){const t=ae(e.uri);return this.registeredSchemasIds[t]=!0,this.cachedSchemaForResource=void 0,e.fileMatch&&e.fileMatch.length&&this.addFilePatternAssociation(e.fileMatch,e.folderUri,[t]),e.schema?this.addSchemaHandle(t,e.schema):this.getOrAddSchemaHandle(t)}clearExternalSchemas(){this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0;for(const e in this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(const e of this.contributionAssociations)this.filePatternAssociations.push(e)}getResolvedSchema(e){const t=ae(e),n=this.schemasById[t];return n?n.getResolvedSchema():this.promise.resolve(void 0)}loadSchema(e){if(!this.requestService){const t=k("Unable to load schema from '{0}'. No schema request service available",Se(e));return this.promise.resolve(new Te({},[t]))}return e.startsWith("http://json-schema.org/")&&(e="https"+e.substring(4)),this.requestService(e).then(t=>{if(!t){const s=k("Unable to load schema from '{0}': No content.",Se(e));return new Te({},[s])}const n=[];t.charCodeAt(0)===65279&&(n.push(k("Problem reading content from '{0}': UTF-8 with BOM detected, only UTF 8 is allowed.",Se(e))),t=t.trimStart());let r={};const i=[];return r=Xn(t,i),i.length&&n.push(k("Unable to parse content from '{0}': Parse error at offset {1}.",Se(e),i[0].offset)),new Te(r,n)},t=>{let n=t.toString();const r=t.toString().split("Error: ");return r.length>1&&(n=r[1]),we(n,".")&&(n=n.substr(0,n.length-1)),new Te({},[k("Unable to load schema from '{0}': {1}.",Se(e),n)])})}resolveSchemaContent(e,t){const n=e.errors.slice(0),r=e.schema;let i=r.$schema?ae(r.$schema):void 0;if(i==="http://json-schema.org/draft-03/schema")return this.promise.resolve(new An({},[k("Draft-03 schemas are not supported.")],[],i));let s=new Set;const o=this.contextService,f=(g,d)=>{d=decodeURIComponent(d);let v=g;return d[0]==="/"&&(d=d.substring(1)),d.split("/").some(A=>(A=A.replace(/~1/g,"/").replace(/~0/g,"~"),v=v[A],!v)),v},a=(g,d,v)=>(d.anchors||(d.anchors=p(g)),d.anchors.get(v)),c=(g,d)=>{for(const v in d)d.hasOwnProperty(v)&&v!=="id"&&v!=="$id"&&(g[v]=d[v])},u=(g,d,v,A)=>{let w;A===void 0||A.length===0?w=d:A.charAt(0)==="/"?w=f(d,A):w=a(d,v,A),w?c(g,w):n.push(k("$ref '{0}' in '{1}' can not be resolved.",A||"",v.uri))},l=(g,d,v,A)=>{o&&!/^[A-Za-z][A-Za-z0-9+\-.+]*:\/\/.*/.test(d)&&(d=o.resolveRelativePath(d,A.uri)),d=ae(d);const w=this.getOrAddSchemaHandle(d);return w.getUnresolvedSchema().then(m=>{if(A.dependencies.add(d),m.errors.length){const S=v?d+"#"+v:d;n.push(k("Problems loading reference '{0}': {1}",S,m.errors[0]))}return u(g,m.schema,w,v),h(g,m.schema,w)})},h=(g,d,v)=>{const A=[];return this.traverseNodes(g,w=>{const m=new Set;for(;w.$ref;){const S=w.$ref,b=S.split("#",2);if(delete w.$ref,b[0].length>0){A.push(l(w,b[0],b[1],v));return}else if(!m.has(S)){const T=b[1];u(w,d,v,T),m.add(S)}}w.$recursiveRef&&s.add("$recursiveRef"),w.$dynamicRef&&s.add("$dynamicRef")}),this.promise.all(A)},p=g=>{const d=new Map;return this.traverseNodes(g,v=>{const A=v.$id||v.id,w=wn(A)&&A.charAt(0)==="#"?A.substring(1):v.$anchor;w&&(d.has(w)?n.push(k("Duplicate anchor declaration: '{0}'",w)):d.set(w,v)),v.$recursiveAnchor&&s.add("$recursiveAnchor"),v.$dynamicAnchor&&s.add("$dynamicAnchor")}),d};return h(r,r,t).then(g=>{let d=[];return s.size&&d.push(k("The schema uses meta-schema features ({0}) that are not yet supported by the validator.",Array.from(s.keys()).join(", "))),new An(r,n,d,i)})}traverseNodes(e,t){if(!e||typeof e!="object")return Promise.resolve(null);const n=new Set,r=(...c)=>{for(const u of c)le(u)&&f.push(u)},i=(...c)=>{for(const u of c)if(le(u))for(const l in u){const p=u[l];le(p)&&f.push(p)}},s=(...c)=>{for(const u of c)if(Array.isArray(u))for(const l of u)le(l)&&f.push(l)},o=c=>{if(Array.isArray(c))for(const u of c)le(u)&&f.push(u);else le(c)&&f.push(c)},f=[e];let a=f.pop();for(;a;)n.has(a)||(n.add(a),t(a),r(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),i(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),o(a.items)),a=f.pop()}getSchemaFromProperty(e,t){var n,r;if(((n=t.root)==null?void 0:n.type)==="object"){for(const i of t.root.properties)if(i.keyNode.value==="$schema"&&((r=i.valueNode)==null?void 0:r.type)==="string"){let s=i.valueNode.value;return this.contextService&&!/^\w[\w\d+.-]*:/.test(s)&&(s=this.contextService.resolveRelativePath(s,e)),s}}}getAssociatedSchemas(e){const t=Object.create(null),n=[],r=En(e);for(const i of this.filePatternAssociations)if(i.matchesPattern(r))for(const s of i.getURIs())t[s]||(n.push(s),t[s]=!0);return n}getSchemaURIsForResource(e,t){let n=t&&this.getSchemaFromProperty(e,t);return n?[n]:this.getAssociatedSchemas(e)}getSchemaForResource(e,t){if(t){let i=this.getSchemaFromProperty(e,t);if(i){const s=ae(i);return this.getOrAddSchemaHandle(s).getResolvedSchema()}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===e)return this.cachedSchemaForResource.resolvedSchema;const n=this.getAssociatedSchemas(e),r=n.length>0?this.createCombinedSchema(e,n).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource:e,resolvedSchema:r},r}createCombinedSchema(e,t){if(t.length===1)return this.getOrAddSchemaHandle(t[0]);{const n="schemaservice://combinedSchema/"+encodeURIComponent(e),r={allOf:t.map(i=>({$ref:i}))};return this.addSchemaHandle(n,r)}}getMatchingSchemas(e,t,n){if(n){const r=n.id||"schemaservice://untitled/matchingSchemas/"+Vr++;return this.addSchemaHandle(r,n).getResolvedSchema().then(s=>t.getMatchingSchemas(s.schema).filter(o=>!o.inverted))}return this.getSchemaForResource(e.uri,t).then(r=>r?t.getMatchingSchemas(r.schema).filter(i=>!i.inverted):[])}},Vr=0;function ae(e){try{return ke.parse(e).toString(!0)}catch{return e}}function En(e){try{return ke.parse(e).with({fragment:null,query:null}).toString(!0)}catch{return e}}function Se(e){try{const t=ke.parse(e);if(t.scheme==="file")return t.fsPath}catch{}return e}function Mr(e,t){const n=[],r=[],i=[];let s=-1;const o=ce(e.getText(),!1);let f=o.scan();function a(g){n.push(g),r.push(i.length)}for(;f!==17;){switch(f){case 1:case 3:{const g=e.positionAt(o.getTokenOffset()).line,d={startLine:g,endLine:g,kind:f===1?"object":"array"};i.push(d);break}case 2:case 4:{const g=f===2?"object":"array";if(i.length>0&&i[i.length-1].kind===g){const d=i.pop(),v=e.positionAt(o.getTokenOffset()).line;d&&v>d.startLine+1&&s!==d.startLine&&(d.endLine=v-1,a(d),s=d.startLine)}break}case 13:{const g=e.positionAt(o.getTokenOffset()).line,d=e.positionAt(o.getTokenOffset()+o.getTokenLength()).line;o.getTokenError()===1&&g+1<e.lineCount?o.setPosition(e.offsetAt(D.create(g+1,0))):g<d&&(a({startLine:g,endLine:d,kind:xe.Comment}),s=g);break}case 12:{const d=e.getText().substr(o.getTokenOffset(),o.getTokenLength()).match(/^\/\/\s*#(region\b)|(endregion\b)/);if(d){const v=e.positionAt(o.getTokenOffset()).line;if(d[1]){const A={startLine:v,endLine:v,kind:xe.Region};i.push(A)}else{let A=i.length-1;for(;A>=0&&i[A].kind!==xe.Region;)A--;if(A>=0){const w=i[A];i.length=A,v>w.startLine&&s!==w.startLine&&(w.endLine=v,a(w),s=w.startLine)}}}break}}f=o.scan()}const c=t&&t.rangeLimit;if(typeof c!="number"||n.length<=c)return n;t&&t.onRangeLimitExceeded&&t.onRangeLimitExceeded(e.uri);const u=[];for(let g of r)g<30&&(u[g]=(u[g]||0)+1);let l=0,h=0;for(let g=0;g<u.length;g++){const d=u[g];if(d){if(d+l>c){h=g;break}l+=d}}const p=[];for(let g=0;g<n.length;g++){const d=r[g];typeof d=="number"&&(d<h||d===h&&l++<c)&&p.push(n[g])}return p}function Er(e,t,n){function r(f){let a=e.offsetAt(f),c=n.getNodeFromOffset(a,!0);const u=[];for(;c;){switch(c.type){case"string":case"object":case"array":const h=c.offset+1,p=c.offset+c.length-1;h<p&&a>=h&&a<=p&&u.push(i(h,p)),u.push(i(c.offset,c.offset+c.length));break;case"number":case"boolean":case"null":case"property":u.push(i(c.offset,c.offset+c.length));break}if(c.type==="property"||c.parent&&c.parent.type==="array"){const h=o(c.offset+c.length,5);h!==-1&&u.push(i(c.offset,h))}c=c.parent}let l;for(let h=u.length-1;h>=0;h--)l=$e.create(u[h],l);return l||(l=$e.create(M.create(f,f))),l}function i(f,a){return M.create(e.positionAt(f),e.positionAt(a))}const s=ce(e.getText(),!0);function o(f,a){return s.setPosition(f),s.scan()===a?s.getTokenOffset()+s.getTokenLength():-1}return t.map(r)}function lt(e,t,n){let r;if(n){const s=e.offsetAt(n.start),o=e.offsetAt(n.end)-s;r={offset:s,length:o}}const i={tabSize:t?t.tabSize:4,insertSpaces:(t==null?void 0:t.insertSpaces)===!0,insertFinalNewline:(t==null?void 0:t.insertFinalNewline)===!0,eol:`
`,keepLines:(t==null?void 0:t.keepLines)===!0};return Cn(e.getText(),r,i).map(s=>re.replace(M.create(e.positionAt(s.offset),e.positionAt(s.offset+s.length)),s.content))}var B;(function(e){e[e.Object=0]="Object",e[e.Array=1]="Array"})(B||(B={}));var Ve=class{constructor(e,t){this.propertyName=e??"",this.beginningLineNumber=t,this.childrenProperties=[],this.lastProperty=!1,this.noKeyName=!1}addChildProperty(e){if(e.parent=this,this.childrenProperties.length>0){let t=0;e.noKeyName?t=this.childrenProperties.length:t=_r(this.childrenProperties,e,jr),t<0&&(t=t*-1-1),this.childrenProperties.splice(t,0,e)}else this.childrenProperties.push(e);return e}};function jr(e,t){const n=e.propertyName.toLowerCase(),r=t.propertyName.toLowerCase();return n<r?-1:n>r?1:0}function _r(e,t,n){const r=t.propertyName.toLowerCase(),i=e[0].propertyName.toLowerCase(),s=e[e.length-1].propertyName.toLowerCase();if(r<i)return 0;if(r>s)return e.length;let o=0,f=e.length-1;for(;o<=f;){let a=f+o>>1,c=n(t,e[a]);if(c>0)o=a+1;else if(c<0)f=a-1;else return a}return-o-1}function Fr(e,t){const n={...t,keepLines:!1},r=K.applyEdits(e,lt(e,n,void 0)),i=K.create("test://test.json","json",0,r),s=$r(i),o=Dr(i,s),f=lt(o,n,void 0),a=K.applyEdits(o,f);return[re.replace(M.create(D.create(0,0),e.positionAt(e.getText().length)),a)]}function $r(e){const t=e.getText(),n=ce(t,!1);let r=new Ve,i=r,s=r,o=r,f,a=0,c=0,u,l,h=-1,p=-1,g=0,d=0,v=[],A=!1,w=!1;for(;(f=n.scan())!==17;){if(A===!0&&f!==14&&f!==15&&f!==12&&f!==13&&s.endLineNumber===void 0){let m=n.getTokenStartLine();l===2||l===4?o.endLineNumber=m-1:s.endLineNumber=m-1,g=m,A=!1}if(w===!0&&f!==14&&f!==15&&f!==12&&f!==13&&(g=n.getTokenStartLine(),w=!1),n.getTokenStartLine()!==a){for(let m=a;m<n.getTokenStartLine();m++){const S=e.getText(M.create(D.create(m,0),D.create(m+1,0))).length;c=c+S}a=n.getTokenStartLine()}switch(f){case 10:{if(u===void 0||u===1||u===5&&v[v.length-1]===B.Object){const m=new Ve(n.getTokenValue(),g);o=s,s=i.addChildProperty(m)}break}case 3:{if(r.beginningLineNumber===void 0&&(r.beginningLineNumber=n.getTokenStartLine()),v[v.length-1]===B.Object)i=s;else if(v[v.length-1]===B.Array){const m=new Ve(n.getTokenValue(),g);m.noKeyName=!0,o=s,s=i.addChildProperty(m),i=s}v.push(B.Array),s.type=B.Array,g=n.getTokenStartLine(),g++;break}case 1:{if(r.beginningLineNumber===void 0)r.beginningLineNumber=n.getTokenStartLine();else if(v[v.length-1]===B.Array){const m=new Ve(n.getTokenValue(),g);m.noKeyName=!0,o=s,s=i.addChildProperty(m)}s.type=B.Object,v.push(B.Object),i=s,g=n.getTokenStartLine(),g++;break}case 4:{d=n.getTokenStartLine(),v.pop(),s.endLineNumber===void 0&&(u===2||u===4)&&(s.endLineNumber=d-1,s.lastProperty=!0,s.lineWhereToAddComma=h,s.indexWhereToAddComa=p,o=s,s=s?s.parent:void 0,i=s),r.endLineNumber=d,g=d+1;break}case 2:{d=n.getTokenStartLine(),v.pop(),u!==1&&(s.endLineNumber===void 0&&(s.endLineNumber=d-1,s.lastProperty=!0,s.lineWhereToAddComma=h,s.indexWhereToAddComa=p),o=s,s=s?s.parent:void 0,i=s),r.endLineNumber=n.getTokenStartLine(),g=d+1;break}case 5:{d=n.getTokenStartLine(),s.endLineNumber===void 0&&(v[v.length-1]===B.Object||v[v.length-1]===B.Array&&(u===2||u===4))&&(s.endLineNumber=d,s.commaIndex=n.getTokenOffset()-c,s.commaLine=d),(u===2||u===4)&&(o=s,s=s?s.parent:void 0,i=s),g=d+1;break}case 13:{u===5&&h===n.getTokenStartLine()&&(v[v.length-1]===B.Array&&(l===2||l===4)||v[v.length-1]===B.Object)&&(v[v.length-1]===B.Array&&(l===2||l===4)||v[v.length-1]===B.Object)&&(s.endLineNumber=void 0,A=!0),(u===1||u===3)&&h===n.getTokenStartLine()&&(w=!0);break}}f!==14&&f!==13&&f!==12&&f!==15&&(l=u,u=f,h=n.getTokenStartLine(),p=n.getTokenOffset()+n.getTokenLength()-c)}return r}function Dr(e,t){if(t.childrenProperties.length===0)return e;const n=K.create("test://test.json","json",0,e.getText()),r=[];for(Sn(r,t,t.beginningLineNumber);r.length>0;){const i=r.shift(),s=i.propertyTreeArray;let o=i.beginningLineNumber;for(let f=0;f<s.length;f++){const a=s[f],c=M.create(D.create(a.beginningLineNumber,0),D.create(a.endLineNumber+1,0)),u=e.getText(c),l=K.create("test://test.json","json",0,u);if(a.lastProperty===!0&&f!==s.length-1){const g=a.lineWhereToAddComma-a.beginningLineNumber,d=a.indexWhereToAddComa,v={range:M.create(D.create(g,d),D.create(g,d)),text:","};K.update(l,[v],1)}else if(a.lastProperty===!1&&f===s.length-1){const g=a.commaIndex,v=a.commaLine-a.beginningLineNumber,A={range:M.create(D.create(v,g),D.create(v,g+1)),text:""};K.update(l,[A],1)}const h=a.endLineNumber-a.beginningLineNumber+1,p={range:M.create(D.create(o,0),D.create(o+h,0)),text:l.getText()};K.update(n,[p],1),Sn(r,a,o),o=o+h}}return n}function Sn(e,t,n){if(t.childrenProperties.length!==0)if(t.type===B.Object){let r=1/0;for(const s of t.childrenProperties)s.beginningLineNumber<r&&(r=s.beginningLineNumber);const i=r-t.beginningLineNumber;n=n+i,e.push(new _n(n,t.childrenProperties))}else t.type===B.Array&&jn(e,t,n)}function jn(e,t,n){for(const r of t.childrenProperties){if(r.type===B.Object){let i=1/0;for(const o of r.childrenProperties)o.beginningLineNumber<i&&(i=o.beginningLineNumber);const s=i-r.beginningLineNumber;e.push(new _n(n+r.beginningLineNumber-t.beginningLineNumber+s,r.childrenProperties))}r.type===B.Array&&jn(e,r,n+r.beginningLineNumber-t.beginningLineNumber)}}var _n=class{constructor(e,t){this.beginningLineNumber=e,this.propertyTreeArray=t}};function Ur(e,t){const n=[];return t.visit(r=>{var i;if(r.type==="property"&&r.keyNode.value==="$ref"&&((i=r.valueNode)==null?void 0:i.type)==="string"){const s=r.valueNode.value,o=Br(t,s);if(o){const f=e.positionAt(o.offset);n.push({target:`${e.uri}#${f.line+1},${f.character+1}`,range:Rr(e,r.valueNode)})}}return!0}),Promise.resolve(n)}function Rr(e,t){return M.create(e.positionAt(t.offset+1),e.positionAt(t.offset+t.length-1))}function Br(e,t){const n=qr(t);return n?ct(n,e.root):null}function ct(e,t){if(!t)return null;if(e.length===0)return t;const n=e.shift();if(t&&t.type==="object"){const r=t.properties.find(i=>i.keyNode.value===n);return r?ct(e,r.valueNode):null}else if(t&&t.type==="array"&&n.match(/^(0|[1-9][0-9]*)$/)){const r=Number.parseInt(n),i=t.items[r];return i?ct(e,i):null}return null}function qr(e){return e==="#"?[]:e[0]!=="#"||e[1]!=="/"?null:e.substring(2).split(/\//).map(Jr)}function Jr(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Wr(e){const t=e.promiseConstructor||Promise,n=new Pr(e.schemaRequestService,e.workspaceContext,t);n.setSchemaContributions(at);const r=new gr(n,e.contributions,t,e.clientCapabilities),i=new dr(n,e.contributions,t),s=new Tr(n),o=new yr(n,t);return{configure:f=>{var a;n.clearExternalSchemas(),(a=f.schemas)==null||a.forEach(n.registerExternalSchema.bind(n)),o.configure(f)},resetSchema:f=>n.onResourceChange(f),doValidation:o.doValidation.bind(o),getLanguageStatus:o.getLanguageStatus.bind(o),parseJSONDocument:f=>pr(f,{collectComments:!0}),newJSONDocument:(f,a)=>hr(f,a),getMatchingSchemas:n.getMatchingSchemas.bind(n),doResolve:r.doResolve.bind(r),doComplete:r.doComplete.bind(r),findDocumentSymbols:s.findDocumentSymbols.bind(s),findDocumentSymbols2:s.findDocumentSymbols2.bind(s),findDocumentColors:s.findDocumentColors.bind(s),getColorPresentations:s.getColorPresentations.bind(s),doHover:i.doHover.bind(i),getFoldingRanges:Mr,getSelectionRanges:Er,findDefinition:()=>Promise.resolve([]),findLinks:Ur,format:(f,a,c)=>lt(f,c,a),sort:(f,a)=>Fr(f,a)}}var Fn;typeof fetch<"u"&&(Fn=function(e){return fetch(e).then(t=>t.text())});var zr=class{constructor(e,t){this._ctx=e,this._languageSettings=t.languageSettings,this._languageId=t.languageId,this._languageService=Wr({workspaceContext:{resolveRelativePath:(n,r)=>{const i=r.substr(0,r.lastIndexOf("/")+1);return Xr(i,n)}},schemaRequestService:t.enableSchemaRequest?Fn:void 0,clientCapabilities:it.LATEST}),this._languageService.configure(this._languageSettings)}async doValidation(e){let t=this._getTextDocument(e);if(t){let n=this._languageService.parseJSONDocument(t);return this._languageService.doValidation(t,n,this._languageSettings)}return Promise.resolve([])}async doComplete(e,t){let n=this._getTextDocument(e);if(!n)return null;let r=this._languageService.parseJSONDocument(n);return this._languageService.doComplete(n,t,r)}async doResolve(e){return this._languageService.doResolve(e)}async doHover(e,t){let n=this._getTextDocument(e);if(!n)return null;let r=this._languageService.parseJSONDocument(n);return this._languageService.doHover(n,t,r)}async format(e,t,n){let r=this._getTextDocument(e);if(!r)return[];let i=this._languageService.format(r,t,n);return Promise.resolve(i)}async resetSchema(e){return Promise.resolve(this._languageService.resetSchema(e))}async findDocumentSymbols(e){let t=this._getTextDocument(e);if(!t)return[];let n=this._languageService.parseJSONDocument(t),r=this._languageService.findDocumentSymbols2(t,n);return Promise.resolve(r)}async findDocumentColors(e){let t=this._getTextDocument(e);if(!t)return[];let n=this._languageService.parseJSONDocument(t),r=this._languageService.findDocumentColors(t,n);return Promise.resolve(r)}async getColorPresentations(e,t,n){let r=this._getTextDocument(e);if(!r)return[];let i=this._languageService.parseJSONDocument(r),s=this._languageService.getColorPresentations(r,i,t,n);return Promise.resolve(s)}async getFoldingRanges(e,t){let n=this._getTextDocument(e);if(!n)return[];let r=this._languageService.getFoldingRanges(n,t);return Promise.resolve(r)}async getSelectionRanges(e,t){let n=this._getTextDocument(e);if(!n)return[];let r=this._languageService.parseJSONDocument(n),i=this._languageService.getSelectionRanges(n,t,r);return Promise.resolve(i)}async parseJSONDocument(e){let t=this._getTextDocument(e);if(!t)return null;let n=this._languageService.parseJSONDocument(t);return Promise.resolve(n)}async getMatchingSchemas(e){let t=this._getTextDocument(e);if(!t)return[];let n=this._languageService.parseJSONDocument(t);return Promise.resolve(this._languageService.getMatchingSchemas(t,n))}_getTextDocument(e){let t=this._ctx.getMirrorModels();for(let n of t)if(n.uri.toString()===e)return K.create(e,this._languageId,n.version,n.getValue());return null}},Hr=47,Be=46;function Gr(e){return e.charCodeAt(0)===Hr}function Xr(e,t){if(Gr(t)){const n=ke.parse(e),r=t.split("/");return n.with({path:$n(r)}).toString()}return Zr(e,t)}function $n(e){const t=[];for(const r of e)r.length===0||r.length===1&&r.charCodeAt(0)===Be||(r.length===2&&r.charCodeAt(0)===Be&&r.charCodeAt(1)===Be?t.pop():t.push(r));e.length>1&&e[e.length-1].length===0&&t.push("");let n=t.join("/");return e[0].length===0&&(n="/"+n),n}function Zr(e,...t){const n=ke.parse(e),r=n.path.split("/");for(let i of t)r.push(...i.split("/"));return n.with({path:$n(r)}).toString()}self.onmessage=()=>{Rn((e,t)=>new zr(e,t))};
